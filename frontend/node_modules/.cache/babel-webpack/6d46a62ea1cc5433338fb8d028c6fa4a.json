{"ast":null,"code":"'use strict';\n\nvar defaults = require('../core/core.defaults');\n\nvar Element = require('../core/core.element');\n\nvar helpers = require('../helpers/index');\n\ndefaults._set('global', {\n  title: {\n    display: false,\n    fontStyle: 'bold',\n    fullWidth: true,\n    lineHeight: 1.2,\n    padding: 10,\n    position: 'top',\n    text: '',\n    weight: 2000 // by default greater than legend (1000) to be above\n\n  }\n});\n\nmodule.exports = function (Chart) {\n  var layout = Chart.layoutService;\n  var noop = helpers.noop;\n  Chart.Title = Element.extend({\n    initialize: function initialize(config) {\n      var me = this;\n      helpers.extend(me, config); // Contains hit boxes for each dataset (in dataset order)\n\n      me.legendHitBoxes = [];\n    },\n    // These methods are ordered by lifecycle. Utilities then follow.\n    beforeUpdate: noop,\n    update: function update(maxWidth, maxHeight, margins) {\n      var me = this; // Update Lifecycle - Probably don't want to ever extend or overwrite this function ;)\n\n      me.beforeUpdate(); // Absorb the master measurements\n\n      me.maxWidth = maxWidth;\n      me.maxHeight = maxHeight;\n      me.margins = margins; // Dimensions\n\n      me.beforeSetDimensions();\n      me.setDimensions();\n      me.afterSetDimensions(); // Labels\n\n      me.beforeBuildLabels();\n      me.buildLabels();\n      me.afterBuildLabels(); // Fit\n\n      me.beforeFit();\n      me.fit();\n      me.afterFit(); //\n\n      me.afterUpdate();\n      return me.minSize;\n    },\n    afterUpdate: noop,\n    //\n    beforeSetDimensions: noop,\n    setDimensions: function setDimensions() {\n      var me = this; // Set the unconstrained dimension before label rotation\n\n      if (me.isHorizontal()) {\n        // Reset position before calculating rotation\n        me.width = me.maxWidth;\n        me.left = 0;\n        me.right = me.width;\n      } else {\n        me.height = me.maxHeight; // Reset position before calculating rotation\n\n        me.top = 0;\n        me.bottom = me.height;\n      } // Reset padding\n\n\n      me.paddingLeft = 0;\n      me.paddingTop = 0;\n      me.paddingRight = 0;\n      me.paddingBottom = 0; // Reset minSize\n\n      me.minSize = {\n        width: 0,\n        height: 0\n      };\n    },\n    afterSetDimensions: noop,\n    //\n    beforeBuildLabels: noop,\n    buildLabels: noop,\n    afterBuildLabels: noop,\n    //\n    beforeFit: noop,\n    fit: function fit() {\n      var me = this;\n      var valueOrDefault = helpers.valueOrDefault;\n      var opts = me.options;\n      var display = opts.display;\n      var fontSize = valueOrDefault(opts.fontSize, defaults.global.defaultFontSize);\n      var minSize = me.minSize;\n      var lineCount = helpers.isArray(opts.text) ? opts.text.length : 1;\n      var lineHeight = helpers.options.toLineHeight(opts.lineHeight, fontSize);\n      var textSize = display ? lineCount * lineHeight + opts.padding * 2 : 0;\n\n      if (me.isHorizontal()) {\n        minSize.width = me.maxWidth; // fill all the width\n\n        minSize.height = textSize;\n      } else {\n        minSize.width = textSize;\n        minSize.height = me.maxHeight; // fill all the height\n      }\n\n      me.width = minSize.width;\n      me.height = minSize.height;\n    },\n    afterFit: noop,\n    // Shared Methods\n    isHorizontal: function isHorizontal() {\n      var pos = this.options.position;\n      return pos === 'top' || pos === 'bottom';\n    },\n    // Actually draw the title block on the canvas\n    draw: function draw() {\n      var me = this;\n      var ctx = me.ctx;\n      var valueOrDefault = helpers.valueOrDefault;\n      var opts = me.options;\n      var globalDefaults = defaults.global;\n\n      if (opts.display) {\n        var fontSize = valueOrDefault(opts.fontSize, globalDefaults.defaultFontSize);\n        var fontStyle = valueOrDefault(opts.fontStyle, globalDefaults.defaultFontStyle);\n        var fontFamily = valueOrDefault(opts.fontFamily, globalDefaults.defaultFontFamily);\n        var titleFont = helpers.fontString(fontSize, fontStyle, fontFamily);\n        var lineHeight = helpers.options.toLineHeight(opts.lineHeight, fontSize);\n        var offset = lineHeight / 2 + opts.padding;\n        var rotation = 0;\n        var top = me.top;\n        var left = me.left;\n        var bottom = me.bottom;\n        var right = me.right;\n        var maxWidth, titleX, titleY;\n        ctx.fillStyle = valueOrDefault(opts.fontColor, globalDefaults.defaultFontColor); // render in correct colour\n\n        ctx.font = titleFont; // Horizontal\n\n        if (me.isHorizontal()) {\n          titleX = left + (right - left) / 2; // midpoint of the width\n\n          titleY = top + offset;\n          maxWidth = right - left;\n        } else {\n          titleX = opts.position === 'left' ? left + offset : right - offset;\n          titleY = top + (bottom - top) / 2;\n          maxWidth = bottom - top;\n          rotation = Math.PI * (opts.position === 'left' ? -0.5 : 0.5);\n        }\n\n        ctx.save();\n        ctx.translate(titleX, titleY);\n        ctx.rotate(rotation);\n        ctx.textAlign = 'center';\n        ctx.textBaseline = 'middle';\n        var text = opts.text;\n\n        if (helpers.isArray(text)) {\n          var y = 0;\n\n          for (var i = 0; i < text.length; ++i) {\n            ctx.fillText(text[i], 0, y, maxWidth);\n            y += lineHeight;\n          }\n        } else {\n          ctx.fillText(text, 0, 0, maxWidth);\n        }\n\n        ctx.restore();\n      }\n    }\n  });\n\n  function createNewTitleBlockAndAttach(chart, titleOpts) {\n    var title = new Chart.Title({\n      ctx: chart.ctx,\n      options: titleOpts,\n      chart: chart\n    });\n    layout.configure(chart, title, titleOpts);\n    layout.addBox(chart, title);\n    chart.titleBlock = title;\n  }\n\n  return {\n    id: 'title',\n    beforeInit: function beforeInit(chart) {\n      var titleOpts = chart.options.title;\n\n      if (titleOpts) {\n        createNewTitleBlockAndAttach(chart, titleOpts);\n      }\n    },\n    beforeUpdate: function beforeUpdate(chart) {\n      var titleOpts = chart.options.title;\n      var titleBlock = chart.titleBlock;\n\n      if (titleOpts) {\n        helpers.mergeIf(titleOpts, defaults.global.title);\n\n        if (titleBlock) {\n          layout.configure(chart, titleBlock, titleOpts);\n          titleBlock.options = titleOpts;\n        } else {\n          createNewTitleBlockAndAttach(chart, titleOpts);\n        }\n      } else if (titleBlock) {\n        Chart.layoutService.removeBox(chart, titleBlock);\n        delete chart.titleBlock;\n      }\n    }\n  };\n};","map":{"version":3,"sources":["/home/basis/TCC/codificacao/frontend/node_modules/chart.js/src/plugins/plugin.title.js"],"names":["defaults","require","Element","helpers","_set","title","display","fontStyle","fullWidth","lineHeight","padding","position","text","weight","module","exports","Chart","layout","layoutService","noop","Title","extend","initialize","config","me","legendHitBoxes","beforeUpdate","update","maxWidth","maxHeight","margins","beforeSetDimensions","setDimensions","afterSetDimensions","beforeBuildLabels","buildLabels","afterBuildLabels","beforeFit","fit","afterFit","afterUpdate","minSize","isHorizontal","width","left","right","height","top","bottom","paddingLeft","paddingTop","paddingRight","paddingBottom","valueOrDefault","opts","options","fontSize","global","defaultFontSize","lineCount","isArray","length","toLineHeight","textSize","pos","draw","ctx","globalDefaults","defaultFontStyle","fontFamily","defaultFontFamily","titleFont","fontString","offset","rotation","titleX","titleY","fillStyle","fontColor","defaultFontColor","font","Math","PI","save","translate","rotate","textAlign","textBaseline","y","i","fillText","restore","createNewTitleBlockAndAttach","chart","titleOpts","configure","addBox","titleBlock","id","beforeInit","mergeIf","removeBox"],"mappings":"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","sourcesContent":["'use strict';\n\nvar defaults = require('../core/core.defaults');\nvar Element = require('../core/core.element');\nvar helpers = require('../helpers/index');\n\ndefaults._set('global', {\n\ttitle: {\n\t\tdisplay: false,\n\t\tfontStyle: 'bold',\n\t\tfullWidth: true,\n\t\tlineHeight: 1.2,\n\t\tpadding: 10,\n\t\tposition: 'top',\n\t\ttext: '',\n\t\tweight: 2000         // by default greater than legend (1000) to be above\n\t}\n});\n\nmodule.exports = function(Chart) {\n\n\tvar layout = Chart.layoutService;\n\tvar noop = helpers.noop;\n\n\tChart.Title = Element.extend({\n\t\tinitialize: function(config) {\n\t\t\tvar me = this;\n\t\t\thelpers.extend(me, config);\n\n\t\t\t// Contains hit boxes for each dataset (in dataset order)\n\t\t\tme.legendHitBoxes = [];\n\t\t},\n\n\t\t// These methods are ordered by lifecycle. Utilities then follow.\n\n\t\tbeforeUpdate: noop,\n\t\tupdate: function(maxWidth, maxHeight, margins) {\n\t\t\tvar me = this;\n\n\t\t\t// Update Lifecycle - Probably don't want to ever extend or overwrite this function ;)\n\t\t\tme.beforeUpdate();\n\n\t\t\t// Absorb the master measurements\n\t\t\tme.maxWidth = maxWidth;\n\t\t\tme.maxHeight = maxHeight;\n\t\t\tme.margins = margins;\n\n\t\t\t// Dimensions\n\t\t\tme.beforeSetDimensions();\n\t\t\tme.setDimensions();\n\t\t\tme.afterSetDimensions();\n\t\t\t// Labels\n\t\t\tme.beforeBuildLabels();\n\t\t\tme.buildLabels();\n\t\t\tme.afterBuildLabels();\n\n\t\t\t// Fit\n\t\t\tme.beforeFit();\n\t\t\tme.fit();\n\t\t\tme.afterFit();\n\t\t\t//\n\t\t\tme.afterUpdate();\n\n\t\t\treturn me.minSize;\n\n\t\t},\n\t\tafterUpdate: noop,\n\n\t\t//\n\n\t\tbeforeSetDimensions: noop,\n\t\tsetDimensions: function() {\n\t\t\tvar me = this;\n\t\t\t// Set the unconstrained dimension before label rotation\n\t\t\tif (me.isHorizontal()) {\n\t\t\t\t// Reset position before calculating rotation\n\t\t\t\tme.width = me.maxWidth;\n\t\t\t\tme.left = 0;\n\t\t\t\tme.right = me.width;\n\t\t\t} else {\n\t\t\t\tme.height = me.maxHeight;\n\n\t\t\t\t// Reset position before calculating rotation\n\t\t\t\tme.top = 0;\n\t\t\t\tme.bottom = me.height;\n\t\t\t}\n\n\t\t\t// Reset padding\n\t\t\tme.paddingLeft = 0;\n\t\t\tme.paddingTop = 0;\n\t\t\tme.paddingRight = 0;\n\t\t\tme.paddingBottom = 0;\n\n\t\t\t// Reset minSize\n\t\t\tme.minSize = {\n\t\t\t\twidth: 0,\n\t\t\t\theight: 0\n\t\t\t};\n\t\t},\n\t\tafterSetDimensions: noop,\n\n\t\t//\n\n\t\tbeforeBuildLabels: noop,\n\t\tbuildLabels: noop,\n\t\tafterBuildLabels: noop,\n\n\t\t//\n\n\t\tbeforeFit: noop,\n\t\tfit: function() {\n\t\t\tvar me = this;\n\t\t\tvar valueOrDefault = helpers.valueOrDefault;\n\t\t\tvar opts = me.options;\n\t\t\tvar display = opts.display;\n\t\t\tvar fontSize = valueOrDefault(opts.fontSize, defaults.global.defaultFontSize);\n\t\t\tvar minSize = me.minSize;\n\t\t\tvar lineCount = helpers.isArray(opts.text) ? opts.text.length : 1;\n\t\t\tvar lineHeight = helpers.options.toLineHeight(opts.lineHeight, fontSize);\n\t\t\tvar textSize = display ? (lineCount * lineHeight) + (opts.padding * 2) : 0;\n\n\t\t\tif (me.isHorizontal()) {\n\t\t\t\tminSize.width = me.maxWidth; // fill all the width\n\t\t\t\tminSize.height = textSize;\n\t\t\t} else {\n\t\t\t\tminSize.width = textSize;\n\t\t\t\tminSize.height = me.maxHeight; // fill all the height\n\t\t\t}\n\n\t\t\tme.width = minSize.width;\n\t\t\tme.height = minSize.height;\n\n\t\t},\n\t\tafterFit: noop,\n\n\t\t// Shared Methods\n\t\tisHorizontal: function() {\n\t\t\tvar pos = this.options.position;\n\t\t\treturn pos === 'top' || pos === 'bottom';\n\t\t},\n\n\t\t// Actually draw the title block on the canvas\n\t\tdraw: function() {\n\t\t\tvar me = this;\n\t\t\tvar ctx = me.ctx;\n\t\t\tvar valueOrDefault = helpers.valueOrDefault;\n\t\t\tvar opts = me.options;\n\t\t\tvar globalDefaults = defaults.global;\n\n\t\t\tif (opts.display) {\n\t\t\t\tvar fontSize = valueOrDefault(opts.fontSize, globalDefaults.defaultFontSize);\n\t\t\t\tvar fontStyle = valueOrDefault(opts.fontStyle, globalDefaults.defaultFontStyle);\n\t\t\t\tvar fontFamily = valueOrDefault(opts.fontFamily, globalDefaults.defaultFontFamily);\n\t\t\t\tvar titleFont = helpers.fontString(fontSize, fontStyle, fontFamily);\n\t\t\t\tvar lineHeight = helpers.options.toLineHeight(opts.lineHeight, fontSize);\n\t\t\t\tvar offset = lineHeight / 2 + opts.padding;\n\t\t\t\tvar rotation = 0;\n\t\t\t\tvar top = me.top;\n\t\t\t\tvar left = me.left;\n\t\t\t\tvar bottom = me.bottom;\n\t\t\t\tvar right = me.right;\n\t\t\t\tvar maxWidth, titleX, titleY;\n\n\t\t\t\tctx.fillStyle = valueOrDefault(opts.fontColor, globalDefaults.defaultFontColor); // render in correct colour\n\t\t\t\tctx.font = titleFont;\n\n\t\t\t\t// Horizontal\n\t\t\t\tif (me.isHorizontal()) {\n\t\t\t\t\ttitleX = left + ((right - left) / 2); // midpoint of the width\n\t\t\t\t\ttitleY = top + offset;\n\t\t\t\t\tmaxWidth = right - left;\n\t\t\t\t} else {\n\t\t\t\t\ttitleX = opts.position === 'left' ? left + offset : right - offset;\n\t\t\t\t\ttitleY = top + ((bottom - top) / 2);\n\t\t\t\t\tmaxWidth = bottom - top;\n\t\t\t\t\trotation = Math.PI * (opts.position === 'left' ? -0.5 : 0.5);\n\t\t\t\t}\n\n\t\t\t\tctx.save();\n\t\t\t\tctx.translate(titleX, titleY);\n\t\t\t\tctx.rotate(rotation);\n\t\t\t\tctx.textAlign = 'center';\n\t\t\t\tctx.textBaseline = 'middle';\n\n\t\t\t\tvar text = opts.text;\n\t\t\t\tif (helpers.isArray(text)) {\n\t\t\t\t\tvar y = 0;\n\t\t\t\t\tfor (var i = 0; i < text.length; ++i) {\n\t\t\t\t\t\tctx.fillText(text[i], 0, y, maxWidth);\n\t\t\t\t\t\ty += lineHeight;\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tctx.fillText(text, 0, 0, maxWidth);\n\t\t\t\t}\n\n\t\t\t\tctx.restore();\n\t\t\t}\n\t\t}\n\t});\n\n\tfunction createNewTitleBlockAndAttach(chart, titleOpts) {\n\t\tvar title = new Chart.Title({\n\t\t\tctx: chart.ctx,\n\t\t\toptions: titleOpts,\n\t\t\tchart: chart\n\t\t});\n\n\t\tlayout.configure(chart, title, titleOpts);\n\t\tlayout.addBox(chart, title);\n\t\tchart.titleBlock = title;\n\t}\n\n\treturn {\n\t\tid: 'title',\n\n\t\tbeforeInit: function(chart) {\n\t\t\tvar titleOpts = chart.options.title;\n\n\t\t\tif (titleOpts) {\n\t\t\t\tcreateNewTitleBlockAndAttach(chart, titleOpts);\n\t\t\t}\n\t\t},\n\n\t\tbeforeUpdate: function(chart) {\n\t\t\tvar titleOpts = chart.options.title;\n\t\t\tvar titleBlock = chart.titleBlock;\n\n\t\t\tif (titleOpts) {\n\t\t\t\thelpers.mergeIf(titleOpts, defaults.global.title);\n\n\t\t\t\tif (titleBlock) {\n\t\t\t\t\tlayout.configure(chart, titleBlock, titleOpts);\n\t\t\t\t\ttitleBlock.options = titleOpts;\n\t\t\t\t} else {\n\t\t\t\t\tcreateNewTitleBlockAndAttach(chart, titleOpts);\n\t\t\t\t}\n\t\t\t} else if (titleBlock) {\n\t\t\t\tChart.layoutService.removeBox(chart, titleBlock);\n\t\t\t\tdelete chart.titleBlock;\n\t\t\t}\n\t\t}\n\t};\n};\n"]},"metadata":{},"sourceType":"script"}