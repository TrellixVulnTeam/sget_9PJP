import { Component, ViewChild, Input, Output, ContentChildren, ChangeDetectorRef, EventEmitter, ViewEncapsulation } from '@angular/core';
import { Table as DataTable } from 'primeng/table';
import { DataProviderFactory, DataProviderType } from './dataprovider-factory';
import { DatatableButtonComponent } from './datatable-button.component';
import { DatatableClickEvent } from './datatable-click-event';
import { Authorization } from '@nuvem/angular-base';
import { Column } from './p-column.directive';
/**
 * Class DatatableComponent
 * @class
 */
export class DatatableComponent {
    /**
     * constructor method
     * @constructor
     * @param {ChangeDetectorRef} changeDetectorRef
     * @param {DataProviderFactory} dataProviderFactory
     * @param {Authorization} authorizationService
     */
    constructor(changeDetectorRef, dataProviderFactory, authorizationService) {
        this.changeDetectorRef = changeDetectorRef;
        this.dataProviderFactory = dataProviderFactory;
        this.authorizationService = authorizationService;
        this.isShowGlobalFilter = false;
        this.isShowFilterRow = false;
        /**
         * filterParams property
         * @type {any}
         */
        this.filterParams = {};
        /**
         * footerMsg property
         * @type {string}
         */
        this.footerMsg = '';
        /**
         * orderInSort property
         * @type {boolean}
         */
        this.orderInSort = false;
        /**
         * value property
         * @type {any}
         */
        this.value = [];
        /**
         * type property
         * @type DataProviderType
         */
        this.type = DataProviderType.Server;
        /**
         * rows property
         * @type {number}
         */
        this.rows = 5;
        /**
         * showPaginationFooter property
         * @type {boolean}
         */
        this.showPaginationFooter = false;
        /**
         * disableEdit property
         * @type {boolean}
         */
        this.disableEdit = false;
        /**
         * disableView property
         * @type {boolean}
         */
        this.disableView = false;
        /**
         * disableDelete property
         * @type {boolean}
         */
        this.disableDelete = false;
        /**
         * selectionMode property
         * @type {string}
         */
        this.selectionMode = 'single';
        /**
         * enableButtonsScroll property
         * @type {boolean}
         */
        this.enableButtonsScroll = false;
        /**
         * emptyMessage property
         * @type {string}
         */
        this.emptyMessage = 'Nenhum registro encontrado.';
        /**
         * verticalButtons property
         * @type {boolean}
         */
        this.verticalButtons = true;
        /**
         * defaultButtons property
         * @type {boolean}
         */
        this.defaultButtons = true;
        /**
         * enableScroll property
         * @type {boolean}
         */
        this.enableScroll = false;
        /**
         * disableLoadingBlockUI property
         * @type {boolean}
         */
        this.disableLoadingBlockUI = false;
        /**
         * filterOnColumn property
         */
        this.filterOnColumn = false;
        /**
         * filterSelectOptions property
         */
        this.filterSelectOptions = [];
        /**
         * updateFiltroHistorico property
         */
        this.updateFilterColumn = false;
        /**
         * customFilterOptions property
         */
        this.customFilterOptions = {};
        /**
         * buttonClick property
         * @type {EventEmitter<any>}
         */
        this.buttonClick = new EventEmitter();
        /**
         * startedLoading property
         * @type {EventEmitter<void>}
         */
        this.startedLoading = new EventEmitter();
        /**
         * finishedLoading property
         * @type {EventEmitter<HttpErrorResponse>}
         */
        this.finishedLoading = new EventEmitter();
        /**
         * onRowSelected property
         * @type {EventEmitter<any>}
         */
        this.onRowSelected = new EventEmitter();
        /**
         * showHorizontalButtonsHeader property
         * @type {boolean}
         */
        this.showHorizontalButtonsHeader = false;
        /**
         * blockContent
         * @type {boolean}
         */
        this.blockContent = false;
        /**
         * visibleColumns property
         * @type {Object}
         */
        this.visibleColumns = {};
        /**
         * showVisibleColumnsControl property
         * @type {boolean}
         */
        this.showVisibleColumnsControl = false;
        /**
         * dataKey property
         * Identificador único para cada registro da tabela
         * @type {string}
         */
        this.dataKey = 'id';
        /**
         * onRowEditEvent property
         * Evento disparado quando o usuário realiza ações de edição em uma linha da tabela
         * @type {EventEmitter<void>}
         */
        this.onRowEditEvent = new EventEmitter();
        this.clonedRowData = {};
        /**
         * errorMessage property
         * @type {string}
         */
        this.errorMessage = 'Ocorreu um erro ao carregar os dados da tabela. Tente novamente.';
        this.editingRow = false;
    }
    get showGlobalFilter() {
        return this.isShowGlobalFilter;
    }
    set showGlobalFilter(showGlobalFilter) {
        this.isShowGlobalFilter = showGlobalFilter;
    }
    get showFilterRow() {
        return this.isShowFilterRow;
    }
    set showFilterRow(ShowFilterRow) {
        this.isShowFilterRow = ShowFilterRow;
    }
    /**
     * ngOnInit method
     * @returns void
     */
    ngOnInit() {
        this.dataProvider = this.dataProviderFactory.create(this.type, this);
        this.pDatatableComponent.rows = this.rows;
        this.subscribeToLoadingEvents();
        this.initRowsPerPageOptionsIfPresent();
        this.defineIfShouldShowHorizontalButtonsHeader();
        this.updateOnValueChange();
        this.finishedLoading.subscribe(() => {
            this.updateOnValueChange();
        });
    }
    /**
     * subscribeFromValueChange method
     * @returns void
     */
    updateOnValueChange() {
        this.filterSelectOptions = [];
        if (this.value) {
            this.value.map((item) => {
                this.filterSelectOptions.push(item);
            });
        }
    }
    /**
     * subscribeToLoadingEvents method
     * @returns void
     */
    subscribeToLoadingEvents() {
        if (!this.disableLoadingBlockUI) {
            this.originalEmptyMessage = this.emptyMessage;
            this.startedLoading.subscribe(() => this.onStartedLoading());
            this.finishedLoading.subscribe(error => this.onFinishedLoading(error));
        }
    }
    /**
     * onStartedLoading method
     * @returns void
     */
    onStartedLoading() {
        this.blockContent = true;
        this.emptyMessage = this.originalEmptyMessage;
    }
    /**
     * onFinishedLoading method
     * @param {HttpErrorResponse} error
     * @returns void
     */
    onFinishedLoading(error) {
        this.blockContent = false;
        if (error) {
            this.emptyMessage = this.errorMessage;
        }
    }
    /**
     * initRowsPerPageOptionsIfPresent method
     * @returns void
     */
    initRowsPerPageOptionsIfPresent() {
        if (this.rowsPerPageOptions) {
            this.pDatatableComponent.rowsPerPageOptions = this.rowsPerPageOptions;
        }
    }
    /**
     * defineIfShouldShowHorizontalButtonsHeader method
     * @returns void
     */
    defineIfShouldShowHorizontalButtonsHeader() {
        if (this.horizontalButtonsHeader) {
            this.showHorizontalButtonsHeader = true;
        }
    }
    /**
     * ngAfterViewInit method
     * @returns void
     */
    ngAfterViewInit() {
        this.setExtraParams();
        this.pDatatableComponent.columns = this.columns;
        this.pDatatableComponent.ngAfterContentInit();
        this.setAllColumnsVisible();
        this.changeDetectorRef.detectChanges();
    }
    /**
     * setExtraParams method
     * @returns void
     */
    setExtraParams() {
        for (let i in this.extraParams) {
            this.pDatatableComponent[i] = this.extraParams[i];
        }
    }
    /**
     * ngAfterContentInit method
     * @returns void
     */
    ngAfterContentInit() {
        this.extraButtons.forEach(button => {
            button.click.subscribe(event => {
                this.onClick(button.name, event);
            });
        });
    }
    /**
     * onClick method
     * @param {string} button
     * @param {any} event
     * @return void
     */
    onClick(button, event) {
        this.buttonClick.emit(new DatatableClickEvent(button, this.selectedRow));
        event.stopPropagation();
        this.resetSelectedRow(button);
    }
    /**
     * onSelectChange method
     * @param {any} event
     * @returns void
     */
    onSelectChange(event) {
        this.onRowSelected.emit(this.selectedRow);
        if (Array.isArray(this.selectedRow) && this.selectedRow.length > 1) {
            this.updateMultipleButtonsStatus(true);
        }
        else {
            this.updateMultipleButtonsStatus(false);
        }
    }
    /**
     * updateMultipleButtonsStatus method
     * @param {boolean} hasMultipleSelection
     * @return void
     */
    updateMultipleButtonsStatus(hasMultipleSelection) {
        this.extraButtons.forEach(button => {
            if (hasMultipleSelection && !button.allowMultipleSelection) {
                button.disabled = true;
            }
            else {
                button.disabled = false;
            }
        });
    }
    /**
     * refresh method
     * @param query
     * @returns void
     */
    refresh(query) {
        this.dataProvider.load(query);
    }
    /**
     * resetSelectedRow method
     * @param button
     * @returns void
     */
    resetSelectedRow(button) {
        if (button === 'delete') {
            this.selectedRow = null;
        }
    }
    /**
     * reset method
     * @returns void
     */
    reset() {
        this.pDatatableComponent.first = 0;
        this.dataProvider.reset();
        this.refresh();
    }
    /**
     * paginationFooterText method
     * @param {string} msg
     * @returns string
     */
    paginationFooterText(msg) {
        const registros = this.totalRecords() === 1 ? 'registro' : 'registros';
        if (msg === '') {
            return `Exibindo: ${this.currentFirstIndex()} a ${this.currentLastIndex()} de ${this.totalRecords()} ${registros}`;
        }
        msg = msg.replace('{totalRecords}', this.totalRecords().toString());
        msg = msg.replace('{currentFirstIndex}', this.currentFirstIndex().toString());
        msg = msg.replace('{currentLastIndex}', this.currentLastIndex().toString());
        return msg;
    }
    /**
     * currentFirstIndex method
     * @returns number
     */
    currentFirstIndex() {
        return this.pDatatableComponent.first + 1;
    }
    /**
     * currentLastIndex method
     * @returns number
     */
    currentLastIndex() {
        const currentLastIndex = this.pDatatableComponent.first + this.pDatatableComponent.rows;
        if (currentLastIndex > this.totalRecords()) {
            return this.totalRecords();
        }
        return currentLastIndex;
    }
    /**
     * totalRecords method
     * @returns number
     */
    totalRecords() {
        return this.pDatatableComponent.totalRecords;
    }
    /**
     * checkRolesToButton method
     * @param {string} button
     * @return boolean
     */
    checkRolesToButton(button) {
        if (this[button]) {
            if (button === 'rulesToHide' ||
                button === 'rulesToShowEdit' ||
                button === 'rulesToShowDelete') {
                this.checkUseButtons(button);
                return this.authorizationService.hasRole(this[button]);
            }
            return !this.authorizationService.hasRole(this[button]);
        }
        return true;
    }
    /**
     * checkUseButtons method
     * @param {string} button
     * @returns void
     */
    checkUseButtons(button) {
        if (this[button] && this[button.replace('Show', 'Hide')]) {
            throw new Error('Não é possível definir dois valores de roles para os botões padrões.');
        }
    }
    /**
     * filter method
     * @returns void
     */
    filter() {
        for (let prop in this.filterParams) {
            if (this.filterParams[prop] === '' ||
                this.filterParams[prop].length === 0) {
                delete this.filterParams[prop];
            }
        }
        if (Object.getOwnPropertyNames(this.filterParams).length === 0) {
            this.reset();
        }
        else {
            this.refresh(this.filterParams);
        }
    }
    /**
     * Método para filtrar por colunas
     * @param column chave da coluna na tabela
     * @param filters valor do filtro
     */
    filterColumn(column, filters) {
        const values = [];
        if (filters instanceof Array) {
            values[column] = [];
            for (let item in filters) {
                let val = filters[item] instanceof Object
                    ? filters[item].value
                    : filters[item];
                values[column].push(val);
            }
        }
        else {
            values[column] = filters;
        }
        this.filterParams = Object.assign(Object.assign({}, this.filterParams), values);
        return this.filter();
    }
    /**
     * Inicia todas as colunas da tabela como visíveis
     */
    setAllColumnsVisible() {
        this.columns.forEach(col => {
            this.visibleColumns[col.field] = 'table-cell';
        });
    }
    /**
     * Verifica se uma coluna deve estar visível
     * @param column string
     * @param visibleColumns Array
     */
    visibleColumnCheck(column, visibleColumns) {
        return visibleColumns.some((item) => {
            return item.field ? item.field == column : true;
        });
    }
    /**
     * Atualzia os valores da variável 'visibleColuns' para mostrar ou não as colunas
     * @param columns array
     */
    updateVisibleColumns(columns) {
        for (let col in this.visibleColumns) {
            if (this.visibleColumnCheck(col, columns)) {
                this.visibleColumns[col] = 'table-cell';
            }
            else {
                this.visibleColumns[col] = 'none';
            }
        }
    }
    onRowEditInitEvent(event, rowData) {
        // const tr = event.srcElement.closest('tr');
        // setTimeout(() => {
        //     this.editingRow = true;
        //     const top = tr.offsetTop;
        //     const height = tr.offsetHeight;
        //     const editButtons = tr.querySelector('.editar-campos');
        //     editButtons.style.top = (top + height) + 'px';
        //     editButtons.style.height ='75px';
        //     editButtons.style.backgroundColor = '#d0d0d0';
        //     editButtons.style.opacity = 1;
        //     this.clonedRowData[rowData.id] = {...rowData};
        //     this.onRowEditEvent.emit({event: "init", data: rowData});
        // }, null , tr);
    }
    onRowEditSaveEvent(event, rowData) {
        this.onRowEditEvent.emit({ event: "save", data: rowData });
        this.resetEditingMode(event);
    }
    onRowEditCancelEvent(event, rowData, index) {
        this.value[index] = this.clonedRowData[rowData.id];
        delete this.clonedRowData[rowData[this.dataKey]];
        this.onRowEditEvent.emit({ event: "cancel", data: rowData });
        this.resetEditingMode(event);
    }
    resetEditingMode(event) {
        const editButtons = event.srcElement.closest('tr').querySelector('.editar-campos');
        editButtons.style.opacity = 0;
        editButtons.style.backgroundColor = '#0000006b';
        editButtons.style.display = 'none';
        this.editingRow = false;
    }
    editarLinhaOver(event) {
        // if (!this.editingRow && this.editMode == 'row') {
        //     const top = event.srcElement.closest('tr').offsetTop;
        //     const height = event.srcElement.closest('tr').offsetHeight;
        //     const editButtons = event.srcElement.closest('tr').querySelector('.editar-campos');
        //     editButtons.style.display = 'flex';
        //     editButtons.style.top = top + 'px';
        //     editButtons.style.height = height + 'px';
        //     editButtons.style.backgroundColor = '#0000006b';
        //     editButtons.style.opacity = 1;
        // }
    }
    editarLinhaOut(event) {
        // if (!this.editingRow) {
        //     const editButtons = event.srcElement.closest('tr').querySelector('.editar-campos');
        //     editButtons.style.display = 'none';
        //     editButtons.style.opacity = 0;
        // }
    }
}
DatatableComponent.decorators = [
    { type: Component, args: [{
                selector: 'basis-datatable',
                template: "<p-blockUI [blocked]=\"blockContent\">\n    <div class=\"center-spinner\">\n        <p-progressSpinner></p-progressSpinner>\n    </div>\n</p-blockUI>\n<div [ngClass]=\"(defaultButtons && verticalButtons) ? 'p-grid p-col-11' : 'p-grid p-col-12'\">\n    <div class=\"table-tools\">\n        <div class=\"p-col-8 nopad\">\n            <h3 class=\"\">{{ title }}</h3>\n        </div>\n        <div class=\"p-col-4 nopad tools\">\n            <basis-show-column *ngIf=\"showVisibleColumnsControl\" [columns]=\"columns\" (updateVisibleColumns)=\"updateVisibleColumns($event)\"></basis-show-column>\n            <button pButton \n                pRipple \n                type=\"button\" \n                icon=\"fas fa-sliders-h\"\n                class=\"p-button-rounded p-button-outlined p-mr-2 p-mb-2\" \n                [ngClass]=\"{'active':filterOnColumn}\"\n                (click)=\"filterOnColumn = !this.filterOnColumn\">\n            </button>\n            <button pButton \n                pRipple \n                type=\"button\" \n                icon=\"fas fa-columns\" \n                [ngClass]=\"{'active':showVisibleColumnsControl}\"\n                class=\"p-button-rounded p-button-outlined p-mr-2 p-mb-2\"\n                (click)=\"showVisibleColumnsControl = !this.showVisibleColumnsControl\">\n            </button>\n        </div>\n    </div>\n</div>\n<div class=\"p-grid\">\n    <div [ngClass]=\"{\n            'p-col-11' : (defaultButtons && verticalButtons),\n            'p-col-12' : (!defaultButtons || !verticalButtons),\n            'edicao-tabela' : editMode == 'row',\n            'editing-row': editingRow\n        }\">\n        <p-table\n            [value]=\"value\"\n            [rows]=\"rows\"\n            [paginator]=\"true\"\n            [selectionMode]=\"selectionMode\"\n            [responsive]=\"true\"\n            [scrollable]=\"enableScroll\"\n            [(selection)]=\"selectedRow\"\n            [editMode]=\"editMode\"\n            (onRowSelect)=\"onSelectChange($event)\"\n            (onRowUnselect)=\"onSelectChange($event)\"\n            styleClass=\"p-datatable-customers\" \n            [rowHover]=\"true\"\n            #datatable\n            [dataKey]=\"dataKey\">\n            <ng-template pTemplate=\"header\" let-columns>\n                <div class=\"p-g\" *ngIf=\"defaultButtons && !verticalButtons\">\n                    <div *ngIf=\"showHorizontalButtonsHeader\" class=\"p-g-4 p-sm-12\">\n                        <span class=\"horizontal-buttons-header\">{{ horizontalButtonsHeader }}</span>\n                    </div>\n                    <div [ngClass]=\"{\n                        'horizontal-buttons': true,\n                        'p-sm-12': true,\n                        'p-g-8': showHorizontalButtonsHeader,\n                        'p-g-12': !showHorizontalButtonsHeader}\">\n                        <ng-container *ngTemplateOutlet=\"defaultButtons\"></ng-container>\n                        <ng-content select=\"horizontalButtons\"></ng-content>\n                    </div>\n                </div>\n                <tr>\n                    <th *ngFor=\"let col of columns\"\n                        [pSortableColumn]=\"col.sortable ? col.field : null\"\n                        [ngStyle]=\"{'display': visibleColumns[col.field]}\">\n                        {{col.header}}\n                        <p-sortIcon *ngIf=\"col.sortable\" [field]=\"col.field\"></p-sortIcon>\n                    </th>\n                </tr>\n                <tr class=\"header-filter-column\" *ngIf=\"filterOnColumn\">\n                    <th *ngFor=\"let col of columns\" [ngStyle]=\"{'display': visibleColumns[col.field]}\">\n                        <basis-filter-column\n                            *ngIf=\"col.field != 'actions'\"\n                            [listaOriginal]=\"filterSelectOptions\"\n                            [lista]=\"filterSelectOptions\"\n                            [field]=\"col.field\"\n                            [updateFiltro]=\"updateFilterColumn\"\n                            (outputEvent)=\"filterColumn(col.field, $event)\"\n                            [filterType]=\"col.filterType\"\n                            [tableType]=\"type\"\n                            [customFilterOptions]=\"customFilterOptions\">\n                        </basis-filter-column>\n                    </th>\n                </tr>\n            </ng-template>\n            <ng-template pTemplate=\"body\" let-rowData let-columns=\"columns\" let-editing=\"editing\" let-ri=\"rowIndex\">\n                <tr [pSelectableRow]=\"rowData\"\n                    [pContextMenuRow]=\"rowData\"\n                    [pEditableRow]=\"rowData\"\n                    [ngClass]=\"{'editing': editing}\"\n                    (mouseover)=\"editarLinhaOver($event)\"\n                    (mouseleave)=\"editarLinhaOut($event)\">\n                    <ng-container *ngFor=\"let col of columns; last as isLast\">\n                        <td *ngIf=\"col.field != 'actions'\" [ngStyle]=\"{'display': visibleColumns[col.field]}\">\n                            <ng-container *ngIf=\"!editMode\">\n                                <span *ngIf=\"!col.bodyTemplate\" [innerHTML]=\"rowData[col.field]\"></span>\n                                <ng-container\n                                    *ngIf=\"col.bodyTemplate\"\n                                    [ngTemplateOutlet]=\"col.bodyTemplate\"\n                                    [ngTemplateOutletContext]=\"{ rowData: rowData, col: col }\">\n                                </ng-container>\n                            </ng-container>\n        \n                            <ng-container *ngIf=\"editMode\">\n                                <p-cellEditor>\n                                    <ng-template pTemplate=\"input\">\n                                        <span *ngIf=\"!col.outputTemplate && col.editable == false\" [innerHTML]=\"rowData[col.field]\"></span>\n                                        <div class=\"p-md-12\" *ngIf=\"!col.inputTemplate && col.editable != false\">\n                                            <div class=\"p-g form-group\">\n                                                <div class=\"p-md-12\">\n                                                    <span class=\"md-inputfield\">\n                                                        <input pInputText type=\"text\" [(ngModel)]=\"rowData[col.field]\" [style]=\"{'width':'100%'}\">\n                                                        <label>{{ col.header }}</label>\n                                                    </span>\n                                                </div>\n                                            </div>\n                                        </div>\n                                        <ng-container\n                                            *ngIf=\"col.inputTemplate\"\n                                            [ngTemplateOutlet]=\"col.inputTemplate\"\n                                            [ngTemplateOutletContext]=\"{ 'rowData': rowData, 'col': col }\">\n                                        </ng-container>\n                                    </ng-template>\n                                    <ng-template pTemplate=\"output\">\n                                        <span *ngIf=\"!col.outputTemplate\" [innerHTML]=\"rowData[col.field]\"></span>\n                                        <ng-container\n                                            *ngIf=\"col.outputTemplate\"\n                                            [ngTemplateOutlet]=\"col.outputTemplate\"\n                                            [ngTemplateOutletContext]=\"{ rowData: rowData, col: col }\">\n                                        </ng-container>\n                                    </ng-template>\n                                </p-cellEditor>\n                            </ng-container>\n                        </td>\n                        <td width=\"8%\" class=\"action-column\" *ngIf=\"col.field == 'actions'\">\n                            <basis-action-button>\n                                <ng-container\n                                    *ngIf=\"col.outputTemplate\"\n                                    [ngTemplateOutlet]=\"col.outputTemplate\"\n                                    [ngTemplateOutletContext]=\"{ rowData: rowData }\">\n                                </ng-container>\n                            </basis-action-button>\n                        </td>\n                        <!-- TODO: verificar implementa\u00E7\u00E3o -->\n                        <!-- <div *ngIf=\"isLast\" class=\"editar-campos\">\n                            <button *ngIf=\"!editing\" pButton type=\"button\" pInitEditableRow (click)=\"onRowEditInitEvent($event, rowData)\">Editar</button>\n                            <button *ngIf=\"editing\" pButton type=\"button\" pSaveEditableRow class=\"p-button-success\" style=\"margin-right: .5em\" (click)=\"onRowEditSaveEvent($event, rowData)\">Salvar</button>\n                            <button *ngIf=\"editing\" pButton type=\"button\" pCancelEditableRow class=\"p-button-danger\" (click)=\"onRowEditCancelEvent($event, rowData, ri)\">Cancelar</button>\n                        </div> -->\n                    </ng-container>\n                </tr>\n            </ng-template>\n            <ng-template *ngIf=\"emptyMessage\">\n                {{ emptyMessage }}\n            </ng-template>\n            <p-footer *ngIf=\"showPaginationFooter && totalRecords() > 0\">\n                {{ paginationFooterText(footerMsg) }}\n            </p-footer>\n        </p-table>\n    </div>\n    <div *ngIf=\"defaultButtons && verticalButtons\"\n        class=\"p-col-1\"\n        [style.position]=\"enableButtonsScroll ? 'sticky' : ''\"\n        [style.top]=\"enableButtonsScroll ? '15%' : ''\">\n            <ng-container *ngTemplateOutlet=\"defaultButtonsTemplate\"></ng-container>\n            <ng-content select=\"basis-datatable-button\"></ng-content>\n    </div>\n</div>\n<ng-template #defaultButtonsTemplate>\n    <basis-datatable-button [bTooltip]=\"selectedRow != null ? 'Editar' : 'Escolha um registro para editar.' \"\n        [class.horizontal-button]=\"!verticalButtons\" class=\"p-button-success\" icon=\"pi pi-pencil\" (click)=\"onClick('edit', $event)\"\n        *ngIf=\"!disableEdit && checkRolesToButton('rulesToShowView') && checkRolesToButton('rulesToHideView')\" [disabled]=\"selectedRow == null\">\n    </basis-datatable-button>\n\n    <basis-datatable-button [bTooltip]=\"selectedRow != null ? 'Visualizar' : 'Escolha um registro para visualizar.'\"\n        [class.horizontal-button]=\"!verticalButtons\" icon=\"pi pi-search-plus\" (click)=\"onClick('view', $event)\"\n        *ngIf=\"!disableView && checkRolesToButton('rulesToShowEdit') && checkRolesToButton('rulesToHideEdit')\" [disabled]=\"selectedRow == null\">\n    </basis-datatable-button>\n\n    <basis-datatable-button [bTooltip]=\"selectedRow != null ? 'Excluir' : 'Escolha um registro para excluir.'\"\n        [class.horizontal-button]=\"!verticalButtons\" class=\"p-button-danger\" icon=\"pi pi-trash\" (click)=\"onClick('delete', $event)\"\n        *ngIf=\"!disableDelete && checkRolesToButton('rulesToShowDelete') && checkRolesToButton('rulesToHideDelete')\" [disabled]=\"selectedRow == null\">\n    </basis-datatable-button>\n\n    <datatable-splitbutton\n        [icon]=\"splitButton.icon\"\n        [class]=\"splitButton.class\"\n        [items]=\"splitButton.itens\"\n        [label]=\"splitButton.label\"\n        [method]=\"splitButton.method\"\n        *ngIf=\"splitButton\">\n    </datatable-splitbutton>\n</ng-template>\n",
                encapsulation: ViewEncapsulation.None,
                styles: ["body .p-datatable .p-datatable-data tr td{word-wrap:break-word}.horizontal-buttons{display:flex;flex-flow:row wrap;justify-content:flex-end}.horizontal-button{padding:0 3px}.horizontal-buttons-header{font-size:1.3em;word-wrap:break-word}.center-spinner{display:flex;flex-direction:column;justify-content:center;align-items:center;text-align:center;min-height:100vh}.text-right{text-align:right}basis-show-column .p-multiselect-panel.p-widget{width:100%;max-width:100%}basis-show-column{padding-right:15px;border-right:1px solid #747474;margin-right:10px}.table-tools{width:100%;text-align:right;margin-bottom:-10px;display:flex;align-items:center}.table-tools h3{text-align:left;float:left;margin:0}.table-tools a{color:#16695c;border-radius:100px;width:20px;height:20px;padding:6px;display:inline-table;margin-left:3px;font-size:15px;text-align:center;line-height:20px}.table-tools a:hover{color:#1aa590;cursor:pointer}.table-tools a.active{color:#16695c;background-color:#e8e8e8;box-shadow:inset 0 2px 3px rgba(0,0,0,.4392156862745098)}.table-tools .tools{display:inline-flex;align-items:center;justify-content:flex-end}.edicao-tabela,.edita-linha{position:relative}tr.editing td{padding-bottom:75px!important}.editar-campos{opacity:0;position:absolute;width:100%;background-color:rgba(0,0,0,.4196078431372549);left:0;margin-top:0;display:flex;align-items:center;justify-content:center;min-height:35px;transition:all .3s ease-in-out;z-index:1}.editar-campos button{color:#fff;font-size:14px;padding:6px 30px 10px;border-radius:5px;height:28px;width:120px!important}.bt-cancelar,.bt-salvar{margin:0 10px}"]
            },] }
];
DatatableComponent.ctorParameters = () => [
    { type: ChangeDetectorRef },
    { type: DataProviderFactory },
    { type: Authorization }
];
DatatableComponent.propDecorators = {
    title: [{ type: Input }],
    splitButton: [{ type: Input }],
    value: [{ type: Input }],
    type: [{ type: Input }],
    rows: [{ type: Input }],
    rowsPerPageOptions: [{ type: Input }],
    url: [{ type: Input }],
    extraParams: [{ type: Input }],
    paginationParameters: [{ type: Input }],
    showPaginationFooter: [{ type: Input }],
    disableEdit: [{ type: Input }],
    disableView: [{ type: Input }],
    disableDelete: [{ type: Input }],
    selectionMode: [{ type: Input }],
    enableButtonsScroll: [{ type: Input }],
    emptyMessage: [{ type: Input }],
    verticalButtons: [{ type: Input }],
    defaultButtons: [{ type: Input }],
    enableScroll: [{ type: Input }],
    scrollHeight: [{ type: Input }],
    scrollWidth: [{ type: Input }],
    rulesToHide: [{ type: Input }],
    rulesToShowEdit: [{ type: Input }],
    rulesToShowDelete: [{ type: Input }],
    rulesToHideView: [{ type: Input }],
    rulesToHideEdit: [{ type: Input }],
    rulesToHideDelete: [{ type: Input }],
    disableLoadingBlockUI: [{ type: Input }],
    rowStyleClass: [{ type: Input }],
    filterOnColumn: [{ type: Input }],
    customFilterOptions: [{ type: Input }],
    buttonClick: [{ type: Output }],
    pDatatableComponent: [{ type: ViewChild, args: [DataTable, { static: true },] }],
    extraButtons: [{ type: ContentChildren, args: [DatatableButtonComponent,] }],
    columns: [{ type: ContentChildren, args: [Column,] }],
    startedLoading: [{ type: Output }],
    finishedLoading: [{ type: Output }],
    onRowSelected: [{ type: Output }],
    showVisibleColumnsControl: [{ type: Input }],
    editMode: [{ type: Input }],
    dataKey: [{ type: Input }],
    onRowEditEvent: [{ type: Output }]
};
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZGF0YXRhYmxlLmNvbXBvbmVudC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uL3Byb2plY3RzL3ByaW1lbmctY29tcG9uZW50cy9zcmMvbGliL2RhdGF0YWJsZS9kYXRhdGFibGUuY29tcG9uZW50LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLE9BQU8sRUFDSCxTQUFTLEVBQ1QsU0FBUyxFQUNULEtBQUssRUFDTCxNQUFNLEVBQ04sZUFBZSxFQUVmLGlCQUFpQixFQUlqQixZQUFZLEVBQ1osaUJBQWlCLEVBQ3BCLE1BQU0sZUFBZSxDQUFDO0FBQ3ZCLE9BQU8sRUFBRSxLQUFLLElBQUksU0FBUyxFQUFFLE1BQU0sZUFBZSxDQUFDO0FBRW5ELE9BQU8sRUFBRSxtQkFBbUIsRUFBRSxnQkFBZ0IsRUFBRSxNQUFNLHdCQUF3QixDQUFDO0FBQy9FLE9BQU8sRUFBRSx3QkFBd0IsRUFBRSxNQUFNLDhCQUE4QixDQUFDO0FBQ3hFLE9BQU8sRUFBRSxtQkFBbUIsRUFBRSxNQUFNLHlCQUF5QixDQUFDO0FBRzlELE9BQU8sRUFBRSxhQUFhLEVBQUUsTUFBTSxxQkFBcUIsQ0FBQztBQUNwRCxPQUFPLEVBQUUsTUFBTSxFQUFFLE1BQU0sc0JBQXNCLENBQUM7QUFFOUM7OztHQUdHO0FBT0gsTUFBTSxPQUFPLGtCQUFrQjtJQWlXM0I7Ozs7OztPQU1HO0lBQ0gsWUFDWSxpQkFBb0MsRUFDcEMsbUJBQXdDLEVBQ3hDLG9CQUFtQztRQUZuQyxzQkFBaUIsR0FBakIsaUJBQWlCLENBQW1CO1FBQ3BDLHdCQUFtQixHQUFuQixtQkFBbUIsQ0FBcUI7UUFDeEMseUJBQW9CLEdBQXBCLG9CQUFvQixDQUFlO1FBelcvQyx1QkFBa0IsR0FBRyxLQUFLLENBQUM7UUFDM0Isb0JBQWUsR0FBRyxLQUFLLENBQUM7UUE4QnhCOzs7V0FHRztRQUNILGlCQUFZLEdBQVEsRUFBRSxDQUFDO1FBRXZCOzs7V0FHRztRQUNILGNBQVMsR0FBVyxFQUFF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QXdCO3NCQU14QyxlQUFlLFNBQUMsTUFBTTs2QkFNdEIsTUFBTTs4QkFNTixNQUFNOzRCQU1OLE1BQU07d0NBd0JOLEtBQUs7dUJBTUwsS0FBSztzQkFPTCxLQUFLOzZCQU9MLE1BQU0iLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge1xuICAgIENvbXBvbmVudCxcbiAgICBWaWV3Q2hpbGQsXG4gICAgSW5wdXQsXG4gICAgT3V0cHV0LFxuICAgIENvbnRlbnRDaGlsZHJlbixcbiAgICBRdWVyeUxpc3QsXG4gICAgQ2hhbmdlRGV0ZWN0b3JSZWYsXG4gICAgQWZ0ZXJWaWV3SW5pdCxcbiAgICBBZnRlckNvbnRlbnRJbml0LFxuICAgIE9uSW5pdCxcbiAgICBFdmVudEVtaXR0ZXIsXG4gICAgVmlld0VuY2Fwc3VsYXRpb25cbn0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5pbXBvcnQgeyBUYWJsZSBhcyBEYXRhVGFibGUgfSBmcm9tICdwcmltZW5nL3RhYmxlJztcbmltcG9ydCB7IERhdGFQcm92aWRlciB9IGZyb20gJy4vZGF0YXByb3ZpZGVyJztcbmltcG9ydCB7IERhdGFQcm92aWRlckZhY3RvcnksIERhdGFQcm92aWRlclR5cGUgfSBmcm9tICcuL2RhdGFwcm92aWRlci1mYWN0b3J5JztcbmltcG9ydCB7IERhdGF0YWJsZUJ1dHRvbkNvbXBvbmVudCB9IGZyb20gJy4vZGF0YXRhYmxlLWJ1dHRvbi5jb21wb25lbnQnO1xuaW1wb3J0IHsgRGF0YXRhYmxlQ2xpY2tFdmVudCB9IGZyb20gJy4vZGF0YXRhYmxlLWNsaWNrLWV2ZW50JztcbmltcG9ydCB7IERhdGF0YWJsZVBhZ2luYXRpb25QYXJhbWV0ZXJzIH0gZnJvbSAnLi9kYXRhdGFibGUtcGFnaW5hdGlvbi1wYXJhbWV0ZXJzJztcbmltcG9ydCB7IEh0dHBFcnJvclJlc3BvbnNlIH0gZnJvbSAnQGFuZ3VsYXIvY29tbW9uL2h0dHAnO1xuaW1wb3J0IHsgQXV0aG9yaXphdGlvbiB9IGZyb20gJ0BudXZlbS9hbmd1bGFyLWJhc2UnO1xuaW1wb3J0IHsgQ29sdW1uIH0gZnJvbSAnLi9wLWNvbHVtbi5kaXJlY3RpdmUnO1xuXG4vKipcbiAqIENsYXNzIERhdGF0YWJsZUNvbXBvbmVudFxuICogQGNsYXNzXG4gKi9cbkBDb21wb25lbnQoe1xuICAgIHNlbGVjdG9yOiAnYmFzaXMtZGF0YXRhYmxlJyxcbiAgICB0ZW1wbGF0ZVVybDogJy4vZGF0YXRhYmxlLmNvbXBvbmVudC5odG1sJyxcbiAgICBzdHlsZVVybHM6IFsnLi9kYXRhdGFibGUuY29tcG9uZW50LmNzcyddLFxuICAgIGVuY2Fwc3VsYXRpb246IFZpZXdFbmNhcHN1bGF0aW9uLk5vbmVcbn0pXG5leHBvcnQgY2xhc3MgRGF0YXRhYmxlQ29tcG9uZW50XG4gICAgaW1wbGVtZW50cyBBZnRlclZpZXdJbml0LCBBZnRlckNvbnRlbnRJbml0LCBPbkluaXQge1xuICAgIGlzU2hvd0dsb2JhbEZpbHRlciA9IGZhbHNlO1xuICAgIGlzU2hvd0ZpbHRlclJvdyA9IGZhbHNlO1xuXG4gICAgZ2V0IHNob3dHbG9iYWxGaWx0ZXIoKTogYm9vbGVhbiB7XG4gICAgICAgIHJldHVybiB0aGlzLmlzU2hvd0dsb2JhbEZpbHRlcjtcbiAgICB9XG5cbiAgICBzZXQgc2hvd0dsb2JhbEZpbHRlcihzaG93R2xvYmFsRmlsdGVyOiBib29sZWFuKSB7XG4gICAgICAgIHRoaXMuaXNTaG93R2xvYmFsRmlsdGVyID0gc2hvd0dsb2JhbEZpbHRlcjtcbiAgICB9XG5cbiAgICBnZXQgc2hvd0ZpbHRlclJvdygpOiBib29sZWFuIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuaXNTaG93RmlsdGVyUm93O1xuICAgIH1cblxuICAgIHNldCBzaG93RmlsdGVyUm93KFNob3dGaWx0ZXJSb3c6IGJvb2xlYW4pIHtcbiAgICAgICAgdGhpcy5pc1Nob3dGaWx0ZXJSb3cgPSBTaG93RmlsdGVyUm93O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIHNlbGVjdGVkUm93IHByb3BlcnR5XG4gICAgICogQHR5cGUge2FueX1cbiAgICAgKi9cbiAgICBzZWxlY3RlZFJvdzogYW55O1xuXG4gICAgLyoqXG4gICAgICogZGF0YVByb3ZpZGVyIHByb3BlcnR5XG4gICAgICogQHR5cGUge0RhdGFQcm92aWRlcn1cbiAgICAgKi9cbiAgICBkYXRhUHJvdmlkZXI6IERhdGFQcm92aWRlcjtcblxuICAgIC8qKlxuICAgICAqIGZpbHRlclBhcmFtcyBwcm9wZXJ0eVxuICAgICAqIEB0eXBlIHthbnl9XG4gICAgICovXG4gICAgZmlsdGVyUGFyYW1zOiBhbnkgPSB7fTtcblxuICAgIC8qKlxuICAgICAqIGZvb3Rlck1zZyBwcm9wZXJ0eVxuICAgICAqIEB0eXBlIHtzdHJpbmd9XG4gICAgICovXG4gICAgZm9vdGVyTXNnOiBzdHJpbmcgPSAnJztcblxuICAgIC8qKlxuICAgICAqIG9yZGVySW5Tb3J0IHByb3BlcnR5XG4gICAgICogQHR5cGUge2Jvb2xlYW59XG4gICAgICovXG4gICAgb3JkZXJJblNvcnQ6IGJvb2xlYW4gPSBmYWxzZTtcblxuICAgIC8qKlxuICAgICAqIHRpdGxlIHByb3BlcnR5XG4gICAgICogQHR5cGUge3N0cmluZ31cbiAgICAgKi9cbiAgICBASW5wdXQoKSB0aXRsZTogc3RyaW5nO1xuXG4gICAgLyoqXG4gICAgICogc3BsaXRCdXR0b24gcHJvcGVydHlcbiAgICAgKiBAdHlwZSB7YW55fVxuICAgICAqL1xuICAgIEBJbnB1dCgpIHNwbGl0QnV0dG9uOiBhbnk7XG5cbiAgICAvKipcbiAgICAgKiB2YWx1ZSBwcm9wZXJ0eVxuICAgICAqIEB0eXBlIHthbnl9XG4gICAgICovXG4gICAgQElucHV0KCkgdmFsdWU6IGFueVtdID0gW107XG5cbiAgICAvKipcbiAgICAgKiB0eXBlIHByb3BlcnR5XG4gICAgICogQHR5cGUgRGF0YVByb3ZpZGVyVHlwZVxuICAgICAqL1xuICAgIEBJbnB1dCgpIHR5cGU6IERhdGFQcm92aWRlclR5cGUgPSBEYXRhUHJvdmlkZXJUeXBlLlNlcnZlcjtcblxuICAgIC8qKlxuICAgICAqIHJvd3MgcHJvcGVydHlcbiAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAqL1xuICAgIEBJbnB1dCgpIHJvd3M6IG51bWJlciA9IDU7XG5cbiAgICAvKipcbiAgICAgKiByb3dzUGVyUGFnZU9wdGlvbnMgcHJvcGVydHlcbiAgICAgKiBAdHlwZSB7bnVtYmVyW119XG4gICAgICovXG4gICAgQElucHV0KCkgcm93c1BlclBhZ2VPcHRpb25zOiBudW1iZXJbXTtcblxuICAgIC8qKlxuICAgICAqIHVybCBwcm9wZXJ0eVxuICAgICAqIEB0eXBlIHtzdHJpbmd9XG4gICAgICovXG4gICAgQElucHV0KCkgdXJsOiBzdHJpbmc7XG5cbiAgICAvKipcbiAgICAgKiBleHRyYVBhcmFtcyBwcm9wZXJ0eVxuICAgICAqIEB0eXBlIHthbnl9XG4gICAgICovXG4gICAgQElucHV0KCkgZXh0cmFQYXJhbXM6IGFueTtcblxuICAgIC8qKlxuICAgICAqIHBhZ2luYXRpb25QYXJhbWV0ZXJzIHByb3BlcnR5XG4gICAgICogQHR5cGUge0RhdGF0YWJsZVBhZ2luYXRpb25QYXJhbWV0ZXJzfVxuICAgICAqL1xuICAgIEBJbnB1dCgpIHBhZ2luYXRpb25QYXJhbWV0ZXJzOiBEYXRhdGFibGVQYWdpbmF0aW9uUGFyYW1ldGVycztcblxuICAgIC8qKlxuICAgICAqIHNob3dQYWdpbmF0aW9uRm9vdGVyIHByb3BlcnR5XG4gICAgICogQHR5cGUge2Jvb2xlYW59XG4gICAgICovXG4gICAgQElucHV0KCkgc2hvd1BhZ2luYXRpb25Gb290ZXIgPSBmYWxzZTtcblxuICAgIC8qKlxuICAgICAqIGRpc2FibGVFZGl0IHByb3BlcnR5XG4gICAgICogQHR5cGUge2Jvb2xlYW59XG4gICAgICovXG4gICAgQElucHV0KCkgZGlzYWJsZUVkaXQgPSBmYWxzZTtcblxuICAgIC8qKlxuICAgICAqIGRpc2FibGVWaWV3IHByb3BlcnR5XG4gICAgICogQHR5cGUge2Jvb2xlYW59XG4gICAgICovXG4gICAgQElucHV0KCkgZGlzYWJsZVZpZXcgPSBmYWxzZTtcblxuICAgIC8qKlxuICAgICAqIGRpc2FibGVEZWxldGUgcHJvcGVydHlcbiAgICAgKiBAdHlwZSB7Ym9vbGVhbn1cbiAgICAgKi9cbiAgICBASW5wdXQoKSBkaXNhYmxlRGVsZXRlID0gZmFsc2U7XG5cbiAgICAvKipcbiAgICAgKiBzZWxlY3Rpb25Nb2RlIHByb3BlcnR5XG4gICAgICogQHR5cGUge3N0cmluZ31cbiAgICAgKi9cbiAgICBASW5wdXQoKSBzZWxlY3Rpb25Nb2RlID0gJ3NpbmdsZSc7XG5cbiAgICAvKipcbiAgICAgKiBlbmFibGVCdXR0b25zU2Nyb2xsIHByb3BlcnR5XG4gICAgICogQHR5cGUge2Jvb2xlYW59XG4gICAgICovXG4gICAgQElucHV0KCkgZW5hYmxlQnV0dG9uc1Njcm9sbCA9IGZhbHNlO1xuXG4gICAgLyoqXG4gICAgICogZW1wdHlNZXNzYWdlIHByb3BlcnR5XG4gICAgICogQHR5cGUge3N0cmluZ31cbiAgICAgKi9cbiAgICBASW5wdXQoKSBlbXB0eU1lc3NhZ2UgPSAnTmVuaHVtIHJlZ2lzdHJvIGVuY29udHJhZG8uJztcblxuICAgIC8qKlxuICAgICAqIHZlcnRpY2FsQnV0dG9ucyBwcm9wZXJ0eVxuICAgICAqIEB0eXBlIHtib29sZWFufVxuICAgICAqL1xuICAgIEBJbnB1dCgpIHZlcnRpY2FsQnV0dG9ucyA9IHRydWU7XG5cbiAgICAvKipcbiAgICAgKiBkZWZhdWx0QnV0dG9ucyBwcm9wZXJ0eVxuICAgICAqIEB0eXBlIHtib29sZWFufVxuICAgICAqL1xuICAgIEBJbnB1dCgpIGRlZmF1bHRCdXR0b25zID0gdHJ1ZTtcblxuICAgIC8qKlxuICAgICAqIGVuYWJsZVNjcm9sbCBwcm9wZXJ0eVxuICAgICAqIEB0eXBlIHtib29sZWFufVxuICAgICAqL1xuICAgIEBJbnB1dCgpIGVuYWJsZVNjcm9sbCA9IGZhbHNlO1xuXG4gICAgLyoqXG4gICAgICogc2Nyb2xsSGVpZ2h0IHByb3BlcnR5XG4gICAgICogQHR5cGUge3N0cmluZ31cbiAgICAgKi9cbiAgICBASW5wdXQoKSBzY3JvbGxIZWlnaHQ6IHN0cmluZztcblxuICAgIC8qKlxuICAgICAqIHNjcm9sbFdpZHRoIHByb3BlcnR5XG4gICAgICogQHR5cGUge3N0cmluZ31cbiAgICAgKi9cbiAgICBASW5wdXQoKSBzY3JvbGxXaWR0aDogc3RyaW5nO1xuXG4gICAgLyoqXG4gICAgICogcnVsZXNUb0hpZGUgcHJvcGVydHlcbiAgICAgKiBAdHlwZSB7YW55fVxuICAgICAqL1xuICAgIEBJbnB1dCgpIHJ1bGVzVG9IaWRlOiBhbnk7XG5cbiAgICAvKipcbiAgICAgKiBydWxlc1RvU2hvd0VkaXQgcHJvcGVydHlcbiAgICAgKiBAdHlwZSB7YW55fVxuICAgICAqL1xuICAgIEBJbnB1dCgpIHJ1bGVzVG9TaG93RWRpdDogYW55O1xuXG4gICAgLyoqXG4gICAgICogcnVsZXNUb1Nob3dEZWxldGUgcHJvcGVydHlcbiAgICAgKiBAdHlwZSB7YW55fVxuICAgICAqL1xuICAgIEBJbnB1dCgpIHJ1bGVzVG9TaG93RGVsZXRlOiBhbnk7XG5cbiAgICAvKipcbiAgICAgKiBydWxlc1RvSGlkZVZpZXcgcHJvcGVydHlcbiAgICAgKiBAdHlwZSB7YW55fVxuICAgICAqL1xuICAgIEBJbnB1dCgpIHJ1bGVzVG9IaWRlVmlldzogYW55O1xuXG4gICAgLyoqXG4gICAgICogcnVsZXNUb0hpZGVFZGl0IHByb3BlcnR5XG4gICAgICogQHR5cGUge2FueX1cbiAgICAgKi9cbiAgICBASW5wdXQoKSBydWxlc1RvSGlkZUVkaXQ6IGFueTtcblxuICAgIC8qKlxuICAgICAqIHJ1bGVzVG9IaWRlRGVsZXRlIHByb3BlcnR5XG4gICAgICogQHR5cGUge2FueX1cbiAgICAgKi9cbiAgICBASW5wdXQoKSBydWxlc1RvSGlkZURlbGV0ZTogYW55O1xuXG4gICAgLyoqXG4gICAgICogaG9yaXpvbnRhbEJ1dHRvbnNIZWFkZXIgcHJvcGVydHlcbiAgICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgICAqL1xuICAgIGhvcml6b250YWxCdXR0b25zSGVhZGVyOiBzdHJpbmc7XG5cbiAgICAvKipcbiAgICAgKiBkaXNhYmxlTG9hZGluZ0Jsb2NrVUkgcHJvcGVydHlcbiAgICAgKiBAdHlwZSB7Ym9vbGVhbn1cbiAgICAgKi9cbiAgICBASW5wdXQoKSBkaXNhYmxlTG9hZGluZ0Jsb2NrVUkgPSBmYWxzZTtcblxuICAgIC8qKlxuICAgICAqIHJvd1N0eWxlQ2xhc3MgcHJvcGVydHlcbiAgICAgKiBAdHlwZSB7YW55fVxuICAgICAqL1xuICAgIEBJbnB1dCgpIHJvd1N0eWxlQ2xhc3M6IGFueTtcblxuICAgIC8qKlxuICAgICAqIGZpbHRlck9uQ29sdW1uIHByb3BlcnR5XG4gICAgICovXG4gICAgQElucHV0KCkgZmlsdGVyT25Db2x1bW4gPSBmYWxzZTtcblxuICAgIC8qKlxuICAgICAqIGZpbHRlclNlbGVjdE9wdGlvbnMgcHJvcGVydHlcbiAgICAgKi9cbiAgICBmaWx0ZXJTZWxlY3RPcHRpb25zOiBhbnlbXSA9IFtdO1xuXG4gICAgLyoqXG4gICAgICogdXBkYXRlRmlsdHJvSGlzdG9yaWNvIHByb3BlcnR5XG4gICAgICovXG4gICAgdXBkYXRlRmlsdGVyQ29sdW1uOiBib29sZWFuID0gZmFsc2U7XG5cbiAgICAvKipcbiAgICAgKiBjdXN0b21GaWx0ZXJPcHRpb25zIHByb3BlcnR5XG4gICAgICovXG4gICAgQElucHV0KCkgY3VzdG9tRmlsdGVyT3B0aW9uczogT2JqZWN0ID0ge307XG5cbiAgICAvKipcbiAgICAgKiBidXR0b25DbGljayBwcm9wZXJ0eVxuICAgICAqIEB0eXBlIHtFdmVudEVtaXR0ZXI8YW55Pn1cbiAgICAgKi9cbiAgICBAT3V0cHV0KCkgYnV0dG9uQ2xpY2s6IEV2ZW50RW1pdHRlcjxhbnk+ID0gbmV3IEV2ZW50RW1pdHRlcjxhbnk+KCk7XG5cbiAgICAvKipcbiAgICAgKiBwRGF0YXRhYmxlQ29tcG9uZW50IHByb3BlcnR5XG4gICAgICogQHR5cGUge1RhYmxlfVxuICAgICAqL1xuICAgIEBWaWV3Q2hpbGQoRGF0YVRhYmxlLCB7IHN0YXRpYzogdHJ1ZSB9KSBwRGF0YXRhYmxlQ29tcG9uZW50OiBEYXRhVGFibGU7XG5cbiAgICAvKipcbiAgICAgKiBleHRyYUJ1dHRvbnMgcHJvcGVydHlcbiAgICAgKiBAdHlwZSB7UXVlcnlMaXN0PERhdGF0YWJsZUJ1dHRvbkNvbXBvbmVudD59XG4gICAgICovXG4gICAgQENvbnRlbnRDaGlsZHJlbihEYXRhdGFibGVCdXR0b25Db21wb25lbnQpIGV4dHJhQnV0dG9uczogUXVlcnlMaXN0PERhdGF0YWJsZUJ1dHRvbkNvbXBvbmVudD47XG5cbiAgICAvKipcbiAgICAgKiBjb2x1bW5zIHByb3BlcnR5XG4gICAgICogQHR5cGUge2FueVtdfVxuICAgICAqL1xuICAgIEBDb250ZW50Q2hpbGRyZW4oQ29sdW1uKSBjb2x1bW5zOiBDb2x1bW5bXTtcblxuICAgIC8qKlxuICAgICAqIHN0YXJ0ZWRMb2FkaW5nIHByb3BlcnR5XG4gICAgICogQHR5cGUge0V2ZW50RW1pdHRlcjx2b2lkPn1cbiAgICAgKi9cbiAgICBAT3V0cHV0KCkgc3RhcnRlZExvYWRpbmc6IEV2ZW50RW1pdHRlcjx2b2lkPiA9IG5ldyBFdmVudEVtaXR0ZXI8dm9pZD4oKTtcblxuICAgIC8qKlxuICAgICAqIGZpbmlzaGVkTG9hZGluZyBwcm9wZXJ0eVxuICAgICAqIEB0eXBlIHtFdmVudEVtaXR0ZXI8SHR0cEVycm9yUmVzcG9uc2U+fVxuICAgICAqL1xuICAgIEBPdXRwdXQoKSBmaW5pc2hlZExvYWRpbmc6IEV2ZW50RW1pdHRlcjxIdHRwRXJyb3JSZXNwb25zZT4gPSBuZXcgRXZlbnRFbWl0dGVyPEh0dHBFcnJvclJlc3BvbnNlPigpO1xuXG4gICAgLyoqXG4gICAgICogb25Sb3dTZWxlY3RlZCBwcm9wZXJ0eVxuICAgICAqIEB0eXBlIHtFdmVudEVtaXR0ZXI8YW55Pn1cbiAgICAgKi9cbiAgICBAT3V0cHV0KCkgb25Sb3dTZWxlY3RlZDogRXZlbnRFbWl0dGVyPGFueT4gPSBuZXcgRXZlbnRFbWl0dGVyPGFueT4oKTtcblxuICAgIC8qKlxuICAgICAqIHNob3dIb3Jpem9udGFsQnV0dG9uc0hlYWRlciBwcm9wZXJ0eVxuICAgICAqIEB0eXBlIHtib29sZWFufVxuICAgICAqL1xuICAgIHNob3dIb3Jpem9udGFsQnV0dG9uc0hlYWRlciA9IGZhbHNlO1xuXG4gICAgLyoqXG4gICAgICogYmxvY2tDb250ZW50XG4gICAgICogQHR5cGUge2Jvb2xlYW59XG4gICAgICovXG4gICAgYmxvY2tDb250ZW50ID0gZmFsc2U7XG5cbiAgICAvKipcbiAgICAgKiB2aXNpYmxlQ29sdW1ucyBwcm9wZXJ0eVxuICAgICAqIEB0eXBlIHtPYmplY3R9XG4gICAgICovXG4gICAgdmlzaWJsZUNvbHVtbnM6IE9iamVjdCA9IHt9O1xuXG4gICAgLyoqXG4gICAgICogc2hvd1Zpc2libGVDb2x1bW5zQ29udHJvbCBwcm9wZXJ0eVxuICAgICAqIEB0eXBlIHtib29sZWFufVxuICAgICAqL1xuICAgIEBJbnB1dCgpIHNob3dWaXNpYmxlQ29sdW1uc0NvbnRyb2w6IGJvb2xlYW4gPSBmYWxzZTtcblxuICAgIC8qKlxuICAgICAqIGVkaXRNb2RlIHByb3BlcnR5XG4gICAgICogQHR5cGUge3N0cmluZ31cbiAgICAgKi9cbiAgICBASW5wdXQoKSBlZGl0TW9kZTogc3RyaW5nO1xuXG4gICAgLyoqXG4gICAgICogZGF0YUtleSBwcm9wZXJ0eVxuICAgICAqIElkZW50aWZpY2Fkb3Igw7puaWNvIHBhcmEgY2FkYSByZWdpc3RybyBkYSB0YWJlbGFcbiAgICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgICAqL1xuICAgIEBJbnB1dCgpIGRhdGFLZXk6IHN0cmluZyA9ICdpZCc7XG5cbiAgICAvKipcbiAgICAgKiBvblJvd0VkaXRFdmVudCBwcm9wZXJ0eVxuICAgICAqIEV2ZW50byBkaXNwYXJhZG8gcXVhbmRvIG8gdXN1w6FyaW8gcmVhbGl6YSBhw6fDtWVzIGRlIGVkacOnw6NvIGVtIHVtYSBsaW5oYSBkYSB0YWJlbGFcbiAgICAgKiBAdHlwZSB7RXZlbnRFbWl0dGVyPHZvaWQ+fVxuICAgICAqL1xuICAgIEBPdXRwdXQoKSBvblJvd0VkaXRFdmVudDogRXZlbnRFbWl0dGVyPGFueT4gPSBuZXcgRXZlbnRFbWl0dGVyPGFueT4oKTtcblxuICAgIGNsb25lZFJvd0RhdGE6IHsgW3M6IHN0cmluZ106IGFueSB9ID0ge307XG5cbiAgICAvKipcbiAgICAgKiBlcnJvck1lc3NhZ2UgcHJvcGVydHlcbiAgICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgICAqL1xuICAgIHByaXZhdGUgZXJyb3JNZXNzYWdlID0gJ09jb3JyZXUgdW0gZXJybyBhbyBjYXJyZWdhciBvcyBkYWRvcyBkYSB0YWJlbGEuIFRlbnRlIG5vdmFtZW50ZS4nO1xuXG4gICAgLyoqXG4gICAgICogb3JpZ2luYWxFbXB0eU1lc3NhZ2UgcHJvcGVydHlcbiAgICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgICAqL1xuICAgIHByaXZhdGUgb3JpZ2luYWxFbXB0eU1lc3NhZ2U6IHN0cmluZztcblxuICAgIGVkaXRpbmdSb3cgPSBmYWxzZTtcblxuICAgIC8qKlxuICAgICAqIGNvbnN0cnVjdG9yIG1ldGhvZFxuICAgICAqIEBjb25zdHJ1Y3RvclxuICAgICAqIEBwYXJhbSB7Q2hhbmdlRGV0ZWN0b3JSZWZ9IGNoYW5nZURldGVjdG9yUmVmXG4gICAgICogQHBhcmFtIHtEYXRhUHJvdmlkZXJGYWN0b3J5fSBkYXRhUHJvdmlkZXJGYWN0b3J5XG4gICAgICogQHBhcmFtIHtBdXRob3JpemF0aW9ufSBhdXRob3JpemF0aW9uU2VydmljZVxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKFxuICAgICAgICBwcml2YXRlIGNoYW5nZURldGVjdG9yUmVmOiBDaGFuZ2VEZXRlY3RvclJlZixcbiAgICAgICAgcHJpdmF0ZSBkYXRhUHJvdmlkZXJGYWN0b3J5OiBEYXRhUHJvdmlkZXJGYWN0b3J5LFxuICAgICAgICBwcml2YXRlIGF1dGhvcml6YXRpb25TZXJ2aWNlOiBBdXRob3JpemF0aW9uXG4gICAgKSB7fVxuXG4gICAgLyoqXG4gICAgICogbmdPbkluaXQgbWV0aG9kXG4gICAgICogQHJldHVybnMgdm9pZFxuICAgICAqL1xuICAgIG5nT25Jbml0KCkge1xuICAgICAgICB0aGlzLmRhdGFQcm92aWRlciA9IHRoaXMuZGF0YVByb3ZpZGVyRmFjdG9yeS5jcmVhdGUodGhpcy50eXBlLCB0aGlzKTtcbiAgICAgICAgdGhpcy5wRGF0YXRhYmxlQ29tcG9uZW50LnJvd3MgPSB0aGlzLnJvd3M7XG4gICAgICAgIHRoaXMuc3Vic2NyaWJlVG9Mb2FkaW5nRXZlbnRzKCk7XG4gICAgICAgIHRoaXMuaW5pdFJvd3NQZXJQYWdlT3B0aW9uc0lmUHJlc2VudCgpO1xuICAgICAgICB0aGlzLmRlZmluZUlmU2hvdWxkU2hvd0hvcml6b250YWxCdXR0b25zSGVhZGVyKCk7XG4gICAgICAgIHRoaXMudXBkYXRlT25WYWx1ZUNoYW5nZSgpO1xuXG4gICAgICAgIHRoaXMuZmluaXNoZWRMb2FkaW5nLnN1YnNjcmliZSgoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLnVwZGF0ZU9uVmFsdWVDaGFuZ2UoKTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogc3Vic2NyaWJlRnJvbVZhbHVlQ2hhbmdlIG1ldGhvZFxuICAgICAqIEByZXR1cm5zIHZvaWRcbiAgICAgKi9cbiAgICBwcml2YXRlIHVwZGF0ZU9uVmFsdWVDaGFuZ2UoKSB7XG4gICAgICAgIHRoaXMuZmlsdGVyU2VsZWN0T3B0aW9ucyA9IFtdO1xuICAgICAgICBpZiAodGhpcy52YWx1ZSkge1xuICAgICAgICAgICAgdGhpcy52YWx1ZS5tYXAoKGl0ZW06IGFueSkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMuZmlsdGVyU2VsZWN0T3B0aW9ucy5wdXNoKGl0ZW0pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBzdWJzY3JpYmVUb0xvYWRpbmdFdmVudHMgbWV0aG9kXG4gICAgICogQHJldHVybnMgdm9pZFxuICAgICAqL1xuICAgIHByaXZhdGUgc3Vic2NyaWJlVG9Mb2FkaW5nRXZlbnRzKCkge1xuICAgICAgICBpZiAoIXRoaXMuZGlzYWJsZUxvYWRpbmdCbG9ja1VJKSB7XG4gICAgICAgICAgICB0aGlzLm9yaWdpbmFsRW1wdHlNZXNzYWdlID0gdGhpcy5lbXB0eU1lc3NhZ2U7XG4gICAgICAgICAgICB0aGlzLnN0YXJ0ZWRMb2FkaW5nLnN1YnNjcmliZSgoKSA9PiB0aGlzLm9uU3RhcnRlZExvYWRpbmcoKSk7XG4gICAgICAgICAgICB0aGlzLmZpbmlzaGVkTG9hZGluZy5zdWJzY3JpYmUoZXJyb3IgPT5cbiAgICAgICAgICAgICAgICB0aGlzLm9uRmluaXNoZWRMb2FkaW5nKGVycm9yKVxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIG9uU3RhcnRlZExvYWRpbmcgbWV0aG9kXG4gICAgICogQHJldHVybnMgdm9pZFxuICAgICAqL1xuICAgIHByaXZhdGUgb25TdGFydGVkTG9hZGluZygpIHtcbiAgICAgICAgdGhpcy5ibG9ja0NvbnRlbnQgPSB0cnVlO1xuICAgICAgICB0aGlzLmVtcHR5TWVzc2FnZSA9IHRoaXMub3JpZ2luYWxFbXB0eU1lc3NhZ2U7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIG9uRmluaXNoZWRMb2FkaW5nIG1ldGhvZFxuICAgICAqIEBwYXJhbSB7SHR0cEVycm9yUmVzcG9uc2V9IGVycm9yXG4gICAgICogQHJldHVybnMgdm9pZFxuICAgICAqL1xuICAgIHByaXZhdGUgb25GaW5pc2hlZExvYWRpbmcoZXJyb3I6IEh0dHBFcnJvclJlc3BvbnNlKSB7XG4gICAgICAgIHRoaXMuYmxvY2tDb250ZW50ID0gZmFsc2U7XG4gICAgICAgIGlmIChlcnJvcikge1xuICAgICAgICAgICAgdGhpcy5lbXB0eU1lc3NhZ2UgPSB0aGlzLmVycm9yTWVzc2FnZTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIGluaXRSb3dzUGVyUGFnZU9wdGlvbnNJZlByZXNlbnQgbWV0aG9kXG4gICAgICogQHJldHVybnMgdm9pZFxuICAgICAqL1xuICAgIHByaXZhdGUgaW5pdFJvd3NQZXJQYWdlT3B0aW9uc0lmUHJlc2VudCgpIHtcbiAgICAgICAgaWYgKHRoaXMucm93c1BlclBhZ2VPcHRpb25zKSB7XG4gICAgICAgICAgICB0aGlzLnBEYXRhdGFibGVDb21wb25lbnQucm93c1BlclBhZ2VPcHRpb25zID0gdGhpcy5yb3dzUGVyUGFnZU9wdGlvbnM7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBkZWZpbmVJZlNob3VsZFNob3dIb3Jpem9udGFsQnV0dG9uc0hlYWRlciBtZXRob2RcbiAgICAgKiBAcmV0dXJucyB2b2lkXG4gICAgICovXG4gICAgcHJpdmF0ZSBkZWZpbmVJZlNob3VsZFNob3dIb3Jpem9udGFsQnV0dG9uc0hlYWRlcigpIHtcbiAgICAgICAgaWYgKHRoaXMuaG9yaXpvbnRhbEJ1dHRvbnNIZWFkZXIpIHtcbiAgICAgICAgICAgIHRoaXMuc2hvd0hvcml6b250YWxCdXR0b25zSGVhZGVyID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIG5nQWZ0ZXJWaWV3SW5pdCBtZXRob2RcbiAgICAgKiBAcmV0dXJucyB2b2lkXG4gICAgICovXG4gICAgbmdBZnRlclZpZXdJbml0KCkge1xuICAgICAgICB0aGlzLnNldEV4dHJhUGFyYW1zKCk7XG4gICAgICAgIHRoaXMucERhdGF0YWJsZUNvbXBvbmVudC5jb2x1bW5zID0gdGhpcy5jb2x1bW5zO1xuICAgICAgICB0aGlzLnBEYXRhdGFibGVDb21wb25lbnQubmdBZnRlckNvbnRlbnRJbml0KCk7XG4gICAgICAgIHRoaXMuc2V0QWxsQ29sdW1uc1Zpc2libGUoKTtcbiAgICAgICAgdGhpcy5jaGFuZ2VEZXRlY3RvclJlZi5kZXRlY3RDaGFuZ2VzKCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogc2V0RXh0cmFQYXJhbXMgbWV0aG9kXG4gICAgICogQHJldHVybnMgdm9pZFxuICAgICAqL1xuICAgIHByaXZhdGUgc2V0RXh0cmFQYXJhbXMoKSB7XG4gICAgICAgIGZvciAobGV0IGkgaW4gdGhpcy5leHRyYVBhcmFtcykge1xuICAgICAgICAgICAgdGhpcy5wRGF0YXRhYmxlQ29tcG9uZW50W2ldID0gdGhpcy5leHRyYVBhcmFtc1tpXTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBuZ0FmdGVyQ29udGVudEluaXQgbWV0aG9kXG4gICAgICogQHJldHVybnMgdm9pZFxuICAgICAqL1xuICAgIG5nQWZ0ZXJDb250ZW50SW5pdCgpIHtcbiAgICAgICAgdGhpcy5leHRyYUJ1dHRvbnMuZm9yRWFjaChidXR0b24gPT4ge1xuICAgICAgICAgICAgYnV0dG9uLmNsaWNrLnN1YnNjcmliZShldmVudCA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5vbkNsaWNrKGJ1dHRvbi5uYW1lLCBldmVudCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogb25DbGljayBtZXRob2RcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gYnV0dG9uXG4gICAgICogQHBhcmFtIHthbnl9IGV2ZW50XG4gICAgICogQHJldHVybiB2b2lkXG4gICAgICovXG4gICAgb25DbGljayhidXR0b246IHN0cmluZywgZXZlbnQ6IGFueSkge1xuICAgICAgICB0aGlzLmJ1dHRvbkNsaWNrLmVtaXQoXG4gICAgICAgICAgICBuZXcgRGF0YXRhYmxlQ2xpY2tFdmVudChidXR0b24sIHRoaXMuc2VsZWN0ZWRSb3cpXG4gICAgICAgICk7XG4gICAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgICB0aGlzLnJlc2V0U2VsZWN0ZWRSb3coYnV0dG9uKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBvblNlbGVjdENoYW5nZSBtZXRob2RcbiAgICAgKiBAcGFyYW0ge2FueX0gZXZlbnRcbiAgICAgKiBAcmV0dXJucyB2b2lkXG4gICAgICovXG4gICAgb25TZWxlY3RDaGFuZ2UoZXZlbnQ6IGFueSkge1xuICAgICAgICB0aGlzLm9uUm93U2VsZWN0ZWQuZW1pdCh0aGlzLnNlbGVjdGVkUm93KTtcbiAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkodGhpcy5zZWxlY3RlZFJvdykgJiYgdGhpcy5zZWxlY3RlZFJvdy5sZW5ndGggPiAxKSB7XG4gICAgICAgICAgICB0aGlzLnVwZGF0ZU11bHRpcGxlQnV0dG9uc1N0YXR1cyh0cnVlKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMudXBkYXRlTXVsdGlwbGVCdXR0b25zU3RhdHVzKGZhbHNlKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIHVwZGF0ZU11bHRpcGxlQnV0dG9uc1N0YXR1cyBtZXRob2RcbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IGhhc011bHRpcGxlU2VsZWN0aW9uXG4gICAgICogQHJldHVybiB2b2lkXG4gICAgICovXG4gICAgcHJpdmF0ZSB1cGRhdGVNdWx0aXBsZUJ1dHRvbnNTdGF0dXMoaGFzTXVsdGlwbGVTZWxlY3Rpb246IGJvb2xlYW4pIHtcbiAgICAgICAgdGhpcy5leHRyYUJ1dHRvbnMuZm9yRWFjaChidXR0b24gPT4ge1xuICAgICAgICAgICAgaWYgKGhhc011bHRpcGxlU2VsZWN0aW9uICYmICFidXR0b24uYWxsb3dNdWx0aXBsZVNlbGVjdGlvbikge1xuICAgICAgICAgICAgICAgIGJ1dHRvbi5kaXNhYmxlZCA9IHRydWU7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGJ1dHRvbi5kaXNhYmxlZCA9IGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiByZWZyZXNoIG1ldGhvZFxuICAgICAqIEBwYXJhbSBxdWVyeVxuICAgICAqIEByZXR1cm5zIHZvaWRcbiAgICAgKi9cbiAgICByZWZyZXNoKHF1ZXJ5PzogYW55KSB7XG4gICAgICAgIHRoaXMuZGF0YVByb3ZpZGVyLmxvYWQocXVlcnkpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIHJlc2V0U2VsZWN0ZWRSb3cgbWV0aG9kXG4gICAgICogQHBhcmFtIGJ1dHRvblxuICAgICAqIEByZXR1cm5zIHZvaWRcbiAgICAgKi9cbiAgICByZXNldFNlbGVjdGVkUm93KGJ1dHRvbjogc3RyaW5nKSB7XG4gICAgICAgIGlmIChidXR0b24gPT09ICdkZWxldGUnKSB7XG4gICAgICAgICAgICB0aGlzLnNlbGVjdGVkUm93ID0gbnVsbDtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIHJlc2V0IG1ldGhvZFxuICAgICAqIEByZXR1cm5zIHZvaWRcbiAgICAgKi9cbiAgICByZXNldCgpIHtcbiAgICAgICAgdGhpcy5wRGF0YXRhYmxlQ29tcG9uZW50LmZpcnN0ID0gMDtcbiAgICAgICAgdGhpcy5kYXRhUHJvdmlkZXIucmVzZXQoKTtcbiAgICAgICAgdGhpcy5yZWZyZXNoKCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogcGFnaW5hdGlvbkZvb3RlclRleHQgbWV0aG9kXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IG1zZ1xuICAgICAqIEByZXR1cm5zIHN0cmluZ1xuICAgICAqL1xuICAgIHBhZ2luYXRpb25Gb290ZXJUZXh0KG1zZzogc3RyaW5nKTogc3RyaW5nIHtcbiAgICAgICAgY29uc3QgcmVnaXN0cm9zID0gdGhpcy50b3RhbFJlY29yZHMoKSA9PT0gMSA/ICdyZWdpc3RybycgOiAncmVnaXN0cm9zJztcbiAgICAgICAgaWYgKG1zZyA9PT0gJycpIHtcbiAgICAgICAgICAgIHJldHVybiBgRXhpYmluZG86ICR7dGhpcy5jdXJyZW50Rmlyc3RJbmRleCgpfSBhICR7dGhpcy5jdXJyZW50TGFzdEluZGV4KCl9IGRlICR7dGhpcy50b3RhbFJlY29yZHMoKX0gJHtyZWdpc3Ryb3N9YDtcbiAgICAgICAgfVxuICAgICAgICBtc2cgPSBtc2cucmVwbGFjZSgne3RvdGFsUmVjb3Jkc30nLCB0aGlzLnRvdGFsUmVjb3JkcygpLnRvU3RyaW5nKCkpO1xuICAgICAgICBtc2cgPSBtc2cucmVwbGFjZShcbiAgICAgICAgICAgICd7Y3VycmVudEZpcnN0SW5kZXh9JyxcbiAgICAgICAgICAgIHRoaXMuY3VycmVudEZpcnN0SW5kZXgoKS50b1N0cmluZygpXG4gICAgICAgICk7XG4gICAgICAgIG1zZyA9IG1zZy5yZXBsYWNlKFxuICAgICAgICAgICAgJ3tjdXJyZW50TGFzdEluZGV4fScsXG4gICAgICAgICAgICB0aGlzLmN1cnJlbnRMYXN0SW5kZXgoKS50b1N0cmluZygpXG4gICAgICAgICk7XG4gICAgICAgIHJldHVybiBtc2c7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogY3VycmVudEZpcnN0SW5kZXggbWV0aG9kXG4gICAgICogQHJldHVybnMgbnVtYmVyXG4gICAgICovXG4gICAgY3VycmVudEZpcnN0SW5kZXgoKTogbnVtYmVyIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucERhdGF0YWJsZUNvbXBvbmVudC5maXJzdCArIDE7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogY3VycmVudExhc3RJbmRleCBtZXRob2RcbiAgICAgKiBAcmV0dXJucyBudW1iZXJcbiAgICAgKi9cbiAgICBjdXJyZW50TGFzdEluZGV4KCk6IG51bWJlciB7XG4gICAgICAgIGNvbnN0IGN1cnJlbnRMYXN0SW5kZXg6IG51bWJlciA9XG4gICAgICAgICAgICB0aGlzLnBEYXRhdGFibGVDb21wb25lbnQuZmlyc3QgKyB0aGlzLnBEYXRhdGFibGVDb21wb25lbnQucm93cztcbiAgICAgICAgaWYgKGN1cnJlbnRMYXN0SW5kZXggPiB0aGlzLnRvdGFsUmVjb3JkcygpKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy50b3RhbFJlY29yZHMoKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gY3VycmVudExhc3RJbmRleDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiB0b3RhbFJlY29yZHMgbWV0aG9kXG4gICAgICogQHJldHVybnMgbnVtYmVyXG4gICAgICovXG4gICAgdG90YWxSZWNvcmRzKCk6IG51bWJlciB7XG4gICAgICAgIHJldHVybiB0aGlzLnBEYXRhdGFibGVDb21wb25lbnQudG90YWxSZWNvcmRzO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIGNoZWNrUm9sZXNUb0J1dHRvbiBtZXRob2RcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gYnV0dG9uXG4gICAgICogQHJldHVybiBib29sZWFuXG4gICAgICovXG4gICAgY2hlY2tSb2xlc1RvQnV0dG9uKGJ1dHRvbjogc3RyaW5nKTogYm9vbGVhbiB7XG4gICAgICAgIGlmICh0aGlzW2J1dHRvbl0pIHtcbiAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICBidXR0b24gPT09ICdydWxlc1RvSGlkZScgfHxcbiAgICAgICAgICAgICAgICBidXR0b24gPT09ICdydWxlc1RvU2hvd0VkaXQnIHx8XG4gICAgICAgICAgICAgICAgYnV0dG9uID09PSAncnVsZXNUb1Nob3dEZWxldGUnXG4gICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICB0aGlzLmNoZWNrVXNlQnV0dG9ucyhidXR0b24pO1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmF1dGhvcml6YXRpb25TZXJ2aWNlLmhhc1JvbGUodGhpc1tidXR0b25dKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiAhdGhpcy5hdXRob3JpemF0aW9uU2VydmljZS5oYXNSb2xlKHRoaXNbYnV0dG9uXSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogY2hlY2tVc2VCdXR0b25zIG1ldGhvZFxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBidXR0b25cbiAgICAgKiBAcmV0dXJucyB2b2lkXG4gICAgICovXG4gICAgY2hlY2tVc2VCdXR0b25zKGJ1dHRvbjogc3RyaW5nKTogdm9pZCB7XG4gICAgICAgIGlmICh0aGlzW2J1dHRvbl0gJiYgdGhpc1tidXR0b24ucmVwbGFjZSgnU2hvdycsICdIaWRlJyldKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgICAgICAgICAgJ07Do28gw6kgcG9zc8OtdmVsIGRlZmluaXIgZG9pcyB2YWxvcmVzIGRlIHJvbGVzIHBhcmEgb3MgYm90w7VlcyBwYWRyw7Vlcy4nXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogZmlsdGVyIG1ldGhvZFxuICAgICAqIEByZXR1cm5zIHZvaWRcbiAgICAgKi9cbiAgICBmaWx0ZXIoKSB7XG4gICAgICAgIGZvciAobGV0IHByb3AgaW4gdGhpcy5maWx0ZXJQYXJhbXMpIHtcbiAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICB0aGlzLmZpbHRlclBhcmFtc1twcm9wXSA9PT0gJycgfHxcbiAgICAgICAgICAgICAgICB0aGlzLmZpbHRlclBhcmFtc1twcm9wXS5sZW5ndGggPT09IDBcbiAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgIGRlbGV0ZSB0aGlzLmZpbHRlclBhcmFtc1twcm9wXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXModGhpcy5maWx0ZXJQYXJhbXMpLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgdGhpcy5yZXNldCgpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5yZWZyZXNoKHRoaXMuZmlsdGVyUGFyYW1zKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIE3DqXRvZG8gcGFyYSBmaWx0cmFyIHBvciBjb2x1bmFzXG4gICAgICogQHBhcmFtIGNvbHVtbiBjaGF2ZSBkYSBjb2x1bmEgbmEgdGFiZWxhXG4gICAgICogQHBhcmFtIGZpbHRlcnMgdmFsb3IgZG8gZmlsdHJvXG4gICAgICovXG4gICAgZmlsdGVyQ29sdW1uKGNvbHVtbjogc3RyaW5nLCBmaWx0ZXJzOiBhbnkpIHtcbiAgICAgICAgY29uc3QgdmFsdWVzID0gW107XG4gICAgICAgIGlmIChmaWx0ZXJzIGluc3RhbmNlb2YgQXJyYXkpIHtcbiAgICAgICAgICAgIHZhbHVlc1tjb2x1bW5dID0gW107XG4gICAgICAgICAgICBmb3IgKGxldCBpdGVtIGluIGZpbHRlcnMpIHtcbiAgICAgICAgICAgICAgICBsZXQgdmFsID1cbiAgICAgICAgICAgICAgICAgICAgZmlsdGVyc1tpdGVtXSBpbnN0YW5jZW9mIE9iamVjdFxuICAgICAgICAgICAgICAgICAgICAgICAgPyBmaWx0ZXJzW2l0ZW1dLnZhbHVlXG4gICAgICAgICAgICAgICAgICAgICAgICA6IGZpbHRlcnNbaXRlbV07XG4gICAgICAgICAgICAgICAgdmFsdWVzW2NvbHVtbl0ucHVzaCh2YWwpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdmFsdWVzW2NvbHVtbl0gPSBmaWx0ZXJzO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuZmlsdGVyUGFyYW1zID0geyAuLi50aGlzLmZpbHRlclBhcmFtcywgLi4udmFsdWVzIH07XG5cbiAgICAgICAgcmV0dXJuIHRoaXMuZmlsdGVyKCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogSW5pY2lhIHRvZGFzIGFzIGNvbHVuYXMgZGEgdGFiZWxhIGNvbW8gdmlzw612ZWlzXG4gICAgICovXG4gICAgc2V0QWxsQ29sdW1uc1Zpc2libGUoKSB7XG4gICAgICAgIHRoaXMuY29sdW1ucy5mb3JFYWNoKGNvbCA9PiB7XG4gICAgICAgICAgICB0aGlzLnZpc2libGVDb2x1bW5zW2NvbC5maWVsZF0gPSAndGFibGUtY2VsbCc7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFZlcmlmaWNhIHNlIHVtYSBjb2x1bmEgZGV2ZSBlc3RhciB2aXPDrXZlbFxuICAgICAqIEBwYXJhbSBjb2x1bW4gc3RyaW5nXG4gICAgICogQHBhcmFtIHZpc2libGVDb2x1bW5zIEFycmF5XG4gICAgICovXG4gICAgdmlzaWJsZUNvbHVtbkNoZWNrKGNvbHVtbjogc3RyaW5nLCB2aXNpYmxlQ29sdW1uczogW10pIHtcbiAgICAgICAgcmV0dXJuIHZpc2libGVDb2x1bW5zLnNvbWUoKGl0ZW06IGFueSkgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIGl0ZW0uZmllbGQgPyBpdGVtLmZpZWxkID09IGNvbHVtbiA6IHRydWU7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEF0dWFsemlhIG9zIHZhbG9yZXMgZGEgdmFyacOhdmVsICd2aXNpYmxlQ29sdW5zJyBwYXJhIG1vc3RyYXIgb3UgbsOjbyBhcyBjb2x1bmFzXG4gICAgICogQHBhcmFtIGNvbHVtbnMgYXJyYXlcbiAgICAgKi9cbiAgICB1cGRhdGVWaXNpYmxlQ29sdW1ucyhjb2x1bW5zOiBbXSkge1xuICAgICAgICBmb3IgKGxldCBjb2wgaW4gdGhpcy52aXNpYmxlQ29sdW1ucykge1xuICAgICAgICAgICAgaWYgKHRoaXMudmlzaWJsZUNvbHVtbkNoZWNrKGNvbCwgY29sdW1ucykpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnZpc2libGVDb2x1bW5zW2NvbF0gPSAndGFibGUtY2VsbCc7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMudmlzaWJsZUNvbHVtbnNbY29sXSA9ICdub25lJztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIG9uUm93RWRpdEluaXRFdmVudChldmVudCwgcm93RGF0YTogYW55KSB7XG4gICAgICAgIC8vIGNvbnN0IHRyID0gZXZlbnQuc3JjRWxlbWVudC5jbG9zZXN0KCd0cicpO1xuXG4gICAgICAgIC8vIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAvLyAgICAgdGhpcy5lZGl0aW5nUm93ID0gdHJ1ZTtcbiAgICAgICAgLy8gICAgIGNvbnN0IHRvcCA9IHRyLm9mZnNldFRvcDtcbiAgICAgICAgLy8gICAgIGNvbnN0IGhlaWdodCA9IHRyLm9mZnNldEhlaWdodDtcbiAgICAgICAgLy8gICAgIGNvbnN0IGVkaXRCdXR0b25zID0gdHIucXVlcnlTZWxlY3RvcignLmVkaXRhci1jYW1wb3MnKTtcblxuICAgICAgICAvLyAgICAgZWRpdEJ1dHRvbnMuc3R5bGUudG9wID0gKHRvcCArIGhlaWdodCkgKyAncHgnO1xuICAgICAgICAvLyAgICAgZWRpdEJ1dHRvbnMuc3R5bGUuaGVpZ2h0ID0nNzVweCc7XG4gICAgICAgIC8vICAgICBlZGl0QnV0dG9ucy5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSAnI2QwZDBkMCc7XG4gICAgICAgIC8vICAgICBlZGl0QnV0dG9ucy5zdHlsZS5vcGFjaXR5ID0gMTtcblxuICAgICAgICAvLyAgICAgdGhpcy5jbG9uZWRSb3dEYXRhW3Jvd0RhdGEuaWRdID0gey4uLnJvd0RhdGF9O1xuICAgICAgICAvLyAgICAgdGhpcy5vblJvd0VkaXRFdmVudC5lbWl0KHtldmVudDogXCJpbml0XCIsIGRhdGE6IHJvd0RhdGF9KTtcbiAgICAgICAgLy8gfSwgbnVsbCAsIHRyKTtcblxuICAgIH1cblxuICAgIG9uUm93RWRpdFNhdmVFdmVudChldmVudCwgcm93RGF0YTogYW55KSB7XG4gICAgICAgIHRoaXMub25Sb3dFZGl0RXZlbnQuZW1pdCh7ZXZlbnQ6IFwic2F2ZVwiLCBkYXRhOiByb3dEYXRhfSk7XG4gICAgICAgIHRoaXMucmVzZXRFZGl0aW5nTW9kZShldmVudCk7XG4gICAgfVxuXG4gICAgb25Sb3dFZGl0Q2FuY2VsRXZlbnQoZXZlbnQsIHJvd0RhdGE6IGFueSwgaW5kZXg6IG51bWJlcikge1xuICAgICAgICB0aGlzLnZhbHVlW2luZGV4XSA9IHRoaXMuY2xvbmVkUm93RGF0YVtyb3dEYXRhLmlkXTtcblxuICAgICAgICBkZWxldGUgdGhpcy5jbG9uZWRSb3dEYXRhW3Jvd0RhdGFbdGhpcy5kYXRhS2V5XV07XG4gICAgICAgIHRoaXMub25Sb3dFZGl0RXZlbnQuZW1pdCh7ZXZlbnQ6IFwiY2FuY2VsXCIsIGRhdGE6IHJvd0RhdGF9KTtcblxuICAgICAgICB0aGlzLnJlc2V0RWRpdGluZ01vZGUoZXZlbnQpO1xuICAgIH1cblxuICAgIHJlc2V0RWRpdGluZ01vZGUoZXZlbnQpIHtcbiAgICAgICAgY29uc3QgZWRpdEJ1dHRvbnMgPSBldmVudC5zcmNFbGVtZW50LmNsb3Nlc3QoJ3RyJykucXVlcnlTZWxlY3RvcignLmVkaXRhci1jYW1wb3MnKTtcblxuICAgICAgICBlZGl0QnV0dG9ucy5zdHlsZS5vcGFjaXR5ID0gMDtcbiAgICAgICAgZWRpdEJ1dHRvbnMuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gJyMwMDAwMDA2Yic7XG4gICAgICAgIGVkaXRCdXR0b25zLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG5cbiAgICAgICAgdGhpcy5lZGl0aW5nUm93ID0gZmFsc2U7XG4gICAgfVxuXG4gICAgZWRpdGFyTGluaGFPdmVyKGV2ZW50KSB7XG4gICAgICAgIC8vIGlmICghdGhpcy5lZGl0aW5nUm93ICYmIHRoaXMuZWRpdE1vZGUgPT0gJ3JvdycpIHtcbiAgICAgICAgLy8gICAgIGNvbnN0IHRvcCA9IGV2ZW50LnNyY0VsZW1lbnQuY2xvc2VzdCgndHInKS5vZmZzZXRUb3A7XG4gICAgICAgIC8vICAgICBjb25zdCBoZWlnaHQgPSBldmVudC5zcmNFbGVtZW50LmNsb3Nlc3QoJ3RyJykub2Zmc2V0SGVpZ2h0O1xuICAgICAgICAvLyAgICAgY29uc3QgZWRpdEJ1dHRvbnMgPSBldmVudC5zcmNFbGVtZW50LmNsb3Nlc3QoJ3RyJykucXVlcnlTZWxlY3RvcignLmVkaXRhci1jYW1wb3MnKTtcblxuICAgICAgICAvLyAgICAgZWRpdEJ1dHRvbnMuc3R5bGUuZGlzcGxheSA9ICdmbGV4JztcbiAgICAgICAgLy8gICAgIGVkaXRCdXR0b25zLnN0eWxlLnRvcCA9IHRvcCArICdweCc7XG4gICAgICAgIC8vICAgICBlZGl0QnV0dG9ucy5zdHlsZS5oZWlnaHQgPSBoZWlnaHQgKyAncHgnO1xuICAgICAgICAvLyAgICAgZWRpdEJ1dHRvbnMuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gJyMwMDAwMDA2Yic7XG4gICAgICAgIC8vICAgICBlZGl0QnV0dG9ucy5zdHlsZS5vcGFjaXR5ID0gMTtcbiAgICAgICAgLy8gfVxuICAgIH1cblxuICAgIGVkaXRhckxpbmhhT3V0KGV2ZW50KSB7XG4gICAgICAgIC8vIGlmICghdGhpcy5lZGl0aW5nUm93KSB7XG4gICAgICAgIC8vICAgICBjb25zdCBlZGl0QnV0dG9ucyA9IGV2ZW50LnNyY0VsZW1lbnQuY2xvc2VzdCgndHInKS5xdWVyeVNlbGVjdG9yKCcuZWRpdGFyLWNhbXBvcycpO1xuICAgICAgICAvLyAgICAgZWRpdEJ1dHRvbnMuc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICAgICAgLy8gICAgIGVkaXRCdXR0b25zLnN0eWxlLm9wYWNpdHkgPSAwO1xuICAgICAgICAvLyB9XG4gICAgfVxuXG59XG4iXX0=