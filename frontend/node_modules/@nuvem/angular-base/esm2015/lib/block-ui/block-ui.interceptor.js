import { HttpResponse } from '@angular/common/http';
import { Injectable } from "@angular/core";
import { tap } from 'rxjs/operators';
import { BlockUiService } from './block-ui.service';
import * as i0 from "@angular/core";
import * as i1 from "./block-ui.service";
/**
 * Class BlockUiInterceptor
 * @class
 */
import * as ɵngcc0 from '@angular/core';
import * as ɵngcc1 from './block-ui.service';
export class BlockUiInterceptor {
    /**
     * constructor method
     * @constructor
     * @param {BlockUiService} service
     */
    constructor(service) {
        this.service = service;
    }
    /**
     * intercept method
     * @public
     * @param {HttpRequest<any>} req
     * @param {HttpHandler} next
     * @return Observable<HttpEvent<any>>
     */
    intercept(req, next) {
        if (this.isMutation(req.method)) {
            this.service.show();
        }
        return next.handle(req).pipe(tap((event) => {
            if (event instanceof HttpResponse) {
                this.service.hide();
            }
        }, (err) => {
            this.service.hide();
        }));
    }
    /**
     * isMutation method
     * @private
     * @param {string} method
     * @return boolean
     */
    isMutation(method) {
        const mutationsMethods = [
            'DELETE',
            'PATCH',
            'POST',
            'PUT'
        ];
        return mutationsMethods.indexOf(method) !== -1;
    }
}
BlockUiInterceptor.ɵfac = function BlockUiInterceptor_Factory(t) { return new (t || BlockUiInterceptor)(ɵngcc0.ɵɵinject(ɵngcc1.BlockUiService)); };
BlockUiInterceptor.ɵprov = i0.ɵɵdefineInjectable({ factory: function BlockUiInterceptor_Factory() { return new BlockUiInterceptor(i0.ɵɵinject(i1.BlockUiService)); }, token: BlockUiInterceptor, providedIn: "root" });
BlockUiInterceptor.ctorParameters = () => [
    { type: BlockUiService }
];
(function () { (typeof ngDevMode === "undefined" || ngDevMode) && ɵngcc0.ɵsetClassMetadata(BlockUiInterceptor, [{
        type: Injectable,
        args: [{
                providedIn: 'root'
            }]
    }], function () { return [{ type: ɵngcc1.BlockUiService }]; }, null); })();

//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYmxvY2stdWkuaW50ZXJjZXB0b3IuanMiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uL3Byb2plY3RzL2FuZ3VsYXItYmFzZS9zcmMvbGliL2Jsb2NrLXVpL2Jsb2NrLXVpLmludGVyY2VwdG9yLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUNBLE9BQU8sRUFBdUMsWUFBWSxFQUFFLE1BQU0sc0JBQXNCLENBQUM7QUFFekYsT0FBTyxFQUFFLFVBQVUsRUFBRSxNQUFNLGVBQWUsQ0FBQztBQUMzQyxPQUFPLEVBQUUsR0FBRyxFQUFFLE1BQU0sZ0JBQWdCLENBQUM7QUFDckMsT0FBTyxFQUFFLGNBQWMsRUFBRSxNQUFNLG9CQUFvQixDQUFDO0FBQ3BEO0FBR0k7QUFGSjtBQUNBO0FBQ0E7QUFDQSxHQUFHOzs7QUFJSCxNQUFNLE9BQU8sa0JBQWtCO0FBQUcsSUFFOUI7QUFDSjtBQUNBO0FBQ0E7QUFBdUMsT0FDaEM7QUFDUCxJQUFJLFlBQW9CLE9BQXVCO0FBQUksUUFBM0IsWUFBTyxHQUFQLE9BQU8sQ0FBZ0I7QUFBQyxJQUFFLENBQUM7QUFDbkQsSUFDSTtBQUNKO0FBQ0E7QUFBZTtBQUNxQjtBQUNKO0FBQ1MsT0FDbEM7QUFDUCxJQUFJLFNBQVMsQ0FBQyxHQUFxQixFQUFFLElBQWlCO0FBQUksUUFFbEQsSUFBSSxJQUFJLENBQUMsVUFBVSxDQUFDLEdBQUcsQ0FBQyxNQUFNLENBQUMsRUFBRTtBQUN6QyxZQUFZLElBQUksQ0FBQyxPQUFPLENBQUMsSUFBSSxFQUFFLENBQUM7QUFDaEMsU0FBUztBQUNULFFBQ1EsT0FBTyxJQUFJLENBQUMsTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDLElBQUksQ0FDeEIsR0FBRyxDQUNDLENBQUMsS0FBcUIsRUFBRSxFQUFFO0FBQzFDLFlBQW9CLElBQUksS0FBSyxZQUFZLFlBQVksRUFBRTtBQUN2RCxnQkFBd0IsSUFBSSxDQUFDLE9BQU8sQ0FBQyxJQUFJLEVBQUUsQ0FBQztBQUM1QyxhQUFxQjtBQUNyQixRQUFnQixDQUFDLEVBQ0QsQ0FBQyxHQUFRLEVBQUUsRUFBRTtBQUM3QixZQUFvQixJQUFJLENBQUMsT0FBTyxDQUFDLElBQUksRUFBRSxDQUFDO0FBQ3hDLFFBQWdCLENBQUMsQ0FDSixDQUNKLENBQUM7QUFDVixJQUFJLENBQUM7QUFDTCxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1AsSUFBWSxVQUFVLENBQUMsTUFBYztBQUFJLFFBQ2pDLE1BQU0sZ0JBQWdCLEdBQUc7QUFDakMsWUFBWSxRQUFRO0FBQ3BCLFlBQVksT0FBTztBQUNuQixZQUFZLE1BQU07QUFDbEIsWUFBWSxLQUFLO0FBQ2pCLFNBQVMsQ0FBQztBQUNWLFFBQ1EsT0FBTyxnQkFBZ0IsQ0FBQyxPQUFPLENBQUMsTUFBTSxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUM7QUFDdkQsSUFBSSxDQUFDO0FBQ0w7bUpBQUM7QUFDRCx1TkFwREs7QUFBQztFQUhMLFVBQVUsU0FBQyxyQkFHc0MsWUFUekMsY0FBYztBQUFHO09BT3RCLFVBQVUsRUFBRSxNQUFNLGNBQ3JCOzs7OzsrRUFSMkI7QUFBQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IE9ic2VydmFibGUgfSBmcm9tICdyeGpzJztcbmltcG9ydCB7IEh0dHBFdmVudCwgSHR0cEhhbmRsZXIsIEh0dHBSZXF1ZXN0LCBIdHRwUmVzcG9uc2UgfSBmcm9tICdAYW5ndWxhci9jb21tb24vaHR0cCc7XG5pbXBvcnQgeyBIdHRwSW50ZXJjZXB0b3IgfSBmcm9tICdAYW5ndWxhci9jb21tb24vaHR0cCc7XG5pbXBvcnQgeyBJbmplY3RhYmxlIH0gZnJvbSBcIkBhbmd1bGFyL2NvcmVcIjtcbmltcG9ydCB7IHRhcCB9IGZyb20gJ3J4anMvb3BlcmF0b3JzJztcbmltcG9ydCB7IEJsb2NrVWlTZXJ2aWNlIH0gZnJvbSAnLi9ibG9jay11aS5zZXJ2aWNlJztcblxuLyoqXG4gKiBDbGFzcyBCbG9ja1VpSW50ZXJjZXB0b3JcbiAqIEBjbGFzc1xuICovXG5ASW5qZWN0YWJsZSh7XG4gICAgcHJvdmlkZWRJbjogJ3Jvb3QnXG59KVxuZXhwb3J0IGNsYXNzIEJsb2NrVWlJbnRlcmNlcHRvciBpbXBsZW1lbnRzIEh0dHBJbnRlcmNlcHRvciB7XG5cbiAgICAvKipcbiAgICAgKiBjb25zdHJ1Y3RvciBtZXRob2RcbiAgICAgKiBAY29uc3RydWN0b3JcbiAgICAgKiBAcGFyYW0ge0Jsb2NrVWlTZXJ2aWNlfSBzZXJ2aWNlIFxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKHByaXZhdGUgc2VydmljZTogQmxvY2tVaVNlcnZpY2UpIHt9XG5cbiAgICAvKipcbiAgICAgKiBpbnRlcmNlcHQgbWV0aG9kXG4gICAgICogQHB1YmxpYyBcbiAgICAgKiBAcGFyYW0ge0h0dHBSZXF1ZXN0PGFueT59IHJlcVxuICAgICAqIEBwYXJhbSB7SHR0cEhhbmRsZXJ9IG5leHRcbiAgICAgKiBAcmV0dXJuIE9ic2VydmFibGU8SHR0cEV2ZW50PGFueT4+XG4gICAgICovXG4gICAgaW50ZXJjZXB0KHJlcTogSHR0cFJlcXVlc3Q8YW55PiwgbmV4dDogSHR0cEhhbmRsZXIpOiBPYnNlcnZhYmxlPEh0dHBFdmVudDxhbnk+PiB7XG5cbiAgICAgICAgaWYgKHRoaXMuaXNNdXRhdGlvbihyZXEubWV0aG9kKSkge1xuICAgICAgICAgICAgdGhpcy5zZXJ2aWNlLnNob3coKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBuZXh0LmhhbmRsZShyZXEpLnBpcGUoXG4gICAgICAgICAgICB0YXAoXG4gICAgICAgICAgICAgICAgKGV2ZW50OiBIdHRwRXZlbnQ8YW55PikgPT4ge1xuICAgICAgICAgICAgICAgICAgICBpZiAoZXZlbnQgaW5zdGFuY2VvZiBIdHRwUmVzcG9uc2UpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2VydmljZS5oaWRlKCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIChlcnI6IGFueSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnNlcnZpY2UuaGlkZSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIClcbiAgICAgICAgKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogaXNNdXRhdGlvbiBtZXRob2RcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBtZXRob2RcbiAgICAgKiBAcmV0dXJuIGJvb2xlYW5cbiAgICAgKi9cbiAgICBwcml2YXRlIGlzTXV0YXRpb24obWV0aG9kOiBzdHJpbmcpOiBib29sZWFuIHtcbiAgICAgICAgY29uc3QgbXV0YXRpb25zTWV0aG9kcyA9IFtcbiAgICAgICAgICAgICdERUxFVEUnLFxuICAgICAgICAgICAgJ1BBVENIJyxcbiAgICAgICAgICAgICdQT1NUJyxcbiAgICAgICAgICAgICdQVVQnXG4gICAgICAgIF07XG5cbiAgICAgICAgcmV0dXJuIG11dGF0aW9uc01ldGhvZHMuaW5kZXhPZihtZXRob2QpICE9PSAtMTtcbiAgICB9XG59XG4iXX0=